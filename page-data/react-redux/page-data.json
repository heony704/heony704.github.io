{"componentChunkName":"component---src-templates-blog-template-js","path":"/react-redux/","result":{"data":{"cur":{"id":"ef0ea360-89fe-56af-adec-51bc4836e870","html":"<p>React Redux를 어떻게 적용했는지, Context API와 React Redux는 무엇이 다른지 정리해봤다.</p>\n<blockquote>\n<p>React Redux를 적용할 때 <strong>Redux Toolkit</strong>을 함께 사용했다.<br>\nReact Redux 공식문서에서도 Redux Toolkit을 사용하길 권장하며, 실제로 사용해보니 작성해야할 코드가 줄어들어 편했다.</p>\n</blockquote>\n<h2 id=\"react-redux\" style=\"position:relative;\"><a href=\"#react-redux\" aria-label=\"react redux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Redux</h2>\n<p>Redux는 action이라고 불리는 이벤트를 사용해 상태를 관리하는 패턴이며, React Redux는 Redux를 React에서 사용할 수 있는 라이브러리이다.<br>\nReact Redux는 Redux store에 상태를 저장하고 action을 dispatch해서 store의 상태를 변경한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACMklEQVQ4y32T3U/TUBjG+zdp1ES99c5LshsIV4CJ00z82gA/QjKmLDF6RyCiMRFj4Er3gTFhNIYxlyiBGZLNfZSNbbrafchoWNeePqanO6Mrw7c56Wn79nee5z3v4WAJXdfpYHMjlFIJBzyPo3TafG/5xu7W4Kyw7g+E0Lm8tQVhdBTZoSHkhofRCIfNHEJOhXJ2VSZMR0shKE5PQxgZwb7bjbzTibzzBpRa/VQ3fRUaYSDr9SMUJiZRcLlQ9nqx7/FAGBuDXK6gbXHxX4WyfIiKKEEUJfrcCAaRcTiQHRxEZmAA4sICfa9qBK026VHKGF2gcVVrNWSFPKSqBLZuc2ODghqrqyCK0q2h0iYgxChRr3VqmfTZLXORk0E6VlsaoJCT5eIY7JuUhSv+BteiL/GpuN2zSWwwWC5Vxbv5HSzNbSO5I/ZYpwr3miKufJ7B2cAEzgUncT44hU3xJ03UdLNFDHtGVEpNPJv6At/tCB2z93nspWsd9R3gshDDhdADXI8t4mb8NS6FH8H/46OZZAPG+QJ8d9axvJjAyqsEntxdRySQMXO1DjBaSVJVV9f8cPAvcCbgwXsh2ldhMiFiZjyCOV8M87NxeG+t4ftm8VghK+jz3RAuhx/jYvghxr8uQZJbtoLrYBsYWknB7+bx9B6PD293oarHLcRZdyh3UEHqbxmaBrQUQFEJVM0stkZ0KKqOtmbm//l1iN+lJuwHg7MfI0vjUAsGkIE01nOWXPsR/AeLpgeZ8PihPgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Redux 구조\"\n        title=\"Redux 구조\"\n        src=\"/static/fc6bb287b570e5fc1133da5c65168ba1/37523/redux-structure.png\"\n        srcset=\"/static/fc6bb287b570e5fc1133da5c65168ba1/e9ff0/redux-structure.png 180w,\n/static/fc6bb287b570e5fc1133da5c65168ba1/f21e7/redux-structure.png 360w,\n/static/fc6bb287b570e5fc1133da5c65168ba1/37523/redux-structure.png 720w,\n/static/fc6bb287b570e5fc1133da5c65168ba1/302a4/redux-structure.png 1080w,\n/static/fc6bb287b570e5fc1133da5c65168ba1/21b4d/redux-structure.png 1280w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>React Redux는 현재 React에서 지정한 공식 Redux UI 바인딩이다.<br>\n만약 React를 사용중이며 UI 바인딩에 Redux 개념을 이용하고 싶다면 React Redux 라이브러리가 가장 권장된다는 뜻이다.</p>\n<p>React에서 제공되는 기능과 다른 점은 React Redux는 성능 최적화를 해준다는 것이다.<br>\nReact는 상태 업데이트가 일어난다면 값이 변하지 않았더라도 착실하게 전부 리렌더링해주기 때문에 불필요한 리렌더링을 피하기 위해 별도로 최적화를 해줘야 한다.<br>\nReact Redux는 오직 상태의 값이 변할 때만 렌더링이 일어나도록 내부적으로 성능 최적화가 구현되어있다.</p>\n<h3 id=\"store-만들기\" style=\"position:relative;\"><a href=\"#store-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"store 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>store 만들기</h3>\n<p><code class=\"language-text\">configureStore</code> 함수로 상태들을 저장할 store를 만든다.<br>\n옵션에 reducer를 명시해 store에 여러 reducer들을 연결할 수 있다.<br>\nreducer 이외에도 middleware, devTools 등 다른 옵션도 존재한다.</p>\n<p>지금은 아무 reducer도 만들지 않았기 때문에 비워둔다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  reducer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"provider로-store-제공하기\" style=\"position:relative;\"><a href=\"#provider%EB%A1%9C-store-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0\" aria-label=\"provider로 store 제공하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Provider로 store 제공하기</h3>\n<p>store를 전달한 Provider 컴포넌트로 App 컴포넌트를 감싸준다.</p>\n<p>이제 App 컴포넌트 트리에서는 store의 상태를 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Provider</span></span> <span class=\"token attr-name\">store</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"createslice로-action-reducer-만들기\" style=\"position:relative;\"><a href=\"#createslice%EB%A1%9C-action-reducer-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"createslice로 action reducer 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>createSlice로 action, reducer 만들기</h3>\n<p><code class=\"language-text\">createSlice</code> 함수로 초기 상태와 reducer 함수를 받아 action 생성 함수와 reducer를 만든다.<br>\nname 옵션에는 slice 이름, initialState 옵션에는 초기 상태 값, reducers 옵션에는 어떤 action일 때 어떤 상태 변경이 일어나는지를 정의한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> initialState<span class=\"token operator\">:</span> GameState <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  value<span class=\"token operator\">:</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> gameStateSlice <span class=\"token operator\">=</span> <span class=\"token function\">createSlice</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  name<span class=\"token operator\">:</span> <span class=\"token string\">'gameState'</span><span class=\"token punctuation\">,</span>\n  initialState<span class=\"token punctuation\">,</span>\n  reducers<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">ready</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">start</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'playing'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">end</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token string\">'over'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ready<span class=\"token punctuation\">,</span> start<span class=\"token punctuation\">,</span> end <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> gameStateSlice<span class=\"token punctuation\">.</span>actions<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> gameStateSlice<span class=\"token punctuation\">.</span>reducer<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"store에-만들어둔-reducer-연결하기\" style=\"position:relative;\"><a href=\"#store%EC%97%90-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%91%94-reducer-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"store에 만들어둔 reducer 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>store에 만들어둔 reducer 연결하기</h3>\n<p><code class=\"language-text\">createSlice</code> 함수로 만든 reducer들을 store에 연결한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">configureStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  reducer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    gameState<span class=\"token operator\">:</span> gameStateReducer<span class=\"token punctuation\">,</span>\n    score<span class=\"token operator\">:</span> scoreReducer<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> store<span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"만든-상태와-action-생성-함수-사용하기\" style=\"position:relative;\"><a href=\"#%EB%A7%8C%EB%93%A0-%EC%83%81%ED%83%9C%EC%99%80-action-%EC%83%9D%EC%84%B1-%ED%95%A8%EC%88%98-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"만든 상태와 action 생성 함수 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>만든 상태와 action 생성 함수 사용하기</h3>\n<p><code class=\"language-text\">useSelector</code> 훅을 통해 원하는 store 상태를 가져올 수 있고 <code class=\"language-text\">useDispatch</code> 훅을 통해 원하는 action을 생성해 상태를 변경시킬 수 있다.</p>\n<p>TypeScript를 사용하기 때문에 타입을 명시해준 커스텀 훅을 사용했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> gameState <span class=\"token operator\">=</span> <span class=\"token function\">useTypedSelector</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> state<span class=\"token punctuation\">.</span>gameState<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> dispatch <span class=\"token operator\">=</span> <span class=\"token function\">useTypedDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">고양이 정말 좋아하세요?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StartButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">dispatch</span><span class=\"token punctuation\">(</span><span class=\"token function\">start</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">!==</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        증명하기\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StartButton</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">===</span> <span class=\"token string\">'playing'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Game</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">===</span> <span class=\"token string\">'over'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GameResult</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"context--usereducer-vs-react-redux\" style=\"position:relative;\"><a href=\"#context--usereducer-vs-react-redux\" aria-label=\"context  usereducer vs react redux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context + useReducer vs React Redux</h2>\n<p>Context API와 React Redux는 비교 대상이 아니다.<br>\nContext API는 props 전달 없이 상태를 제공할 수 있는 방법일 뿐 상태를 관리할 수 없지만 React Redux는 상태 관리 라이브러리이기 때문이다.</p>\n<p>하지만 Context와 useReducer를 같이 사용하는 방법은 React Redux와 매우 비슷하기 때문에 Context가 아닌 Context + useReducer로 비교해보려 한다.</p>\n<h3 id=\"공통점\" style=\"position:relative;\"><a href=\"#%EA%B3%B5%ED%86%B5%EC%A0%90\" aria-label=\"공통점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>공통점</h3>\n<p>저장소(Context 혹은 Store)를 만들어 action을 dispatch하는 과정이 동일하다.</p>\n<p>상태를 전역적으로 사용할 수 있다.</p>\n<p>상태 변경에 관한 로직이 한군데에 모여있어 파악하기 편하다.</p>\n<h3 id=\"차이점\" style=\"position:relative;\"><a href=\"#%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>차이점</h3>\n<p>Context + useReducer보다 React Redux + Redux Toolkit이 코드 작성하기 더 편했다.</p>\n<p>Context API는 상태를 만들 때마다 Provider를 만들고 중첩해야해서 복잡했는데 React Redux는 짧은 코드로 하나의 Provider로 만들 수 있어 매우 편했다.</p>\n<p style=\"display:flex\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 313px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 101.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABJ0AAASdAHeZh94AAACR0lEQVQ4y41UyXLaUBDUz1jrW7QLhCUEEptsbIiXSg6pVOWQW/7/2KkZgS0UwBy65qkErZ7pnmfYIoYjE1Dtnx0Rw3RDWF7Ez1SPsA/vCMf/HX9jeCrF6uEFOprAUSmSvIbwR5hMF5iUDcZFjTgrkRc1srxCMq4QpgWKaom8aHDnBBjd1/j95y9/wCDmIJrA9SKYtg+HVDkBXBHB9cKuqhRCZ1wJ1IUMRgxS5fkZ0nzOKlmhSKeQxQq63EBXD9DTFiJvoGePEOMa9qHN4Vj65zs35LPhygRqsoCun6DnW/iLPfRsy+dg8wZZrD/m1p+lLTr058ozNEmyjKGLFaL9L/jLfUe2foVunqGmLaLdT+7AcvwTpedgHJllmHOr/voV/mIHVbVQ1P7skVUTbJmcqLlMeIiJGs3hNzvo+ROTqXLDCkkpETpBfpWMCT9y5UUQMoYqVp8qpxsGq1y9IGjf4ejsOmH/i0QqgzG3TiYd50iE4fYHO27aGtYh0H1DTghPIiFiiKTkGZI5slwzyCwxnsONC7jR/XWFfZVskM54fqTQX37j6NBM6ZnRvnP4zxlkDHfxhHTaQlE2l/vO8fqZwaSbt7MGGZekU+pVVnHbavbIbTKSEl5acf1yhsON8GSCsH1nVabVmdHHTQqHq0REcrJA+PC9m2mz4z03TXmW9GLLVu8D8n7ZbUvTZZMiRaaR49bgTjS+2k0ipPxxHilGxbq7SGZbiNEclhvcRnjSuhNwoKl9ujNNS3UzdYLbWz5nlC2SQf3flH95rHvIW2qfqgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Context API의 복잡한 Provider들\" title=\"Context API의 복잡한 Provider들\" src=\"/static/c5ec19efa207d0a1bde2cb39b3bbddb8/80977/context-provider.png\" srcset=\"/static/c5ec19efa207d0a1bde2cb39b3bbddb8/e9ff0/context-provider.png 180w,\n/static/c5ec19efa207d0a1bde2cb39b3bbddb8/80977/context-provider.png 313w\" sizes=\"(max-width: 313px) 100vw, 313px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 313px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 101.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABJ0AAASdAHeZh94AAABoElEQVQ4y+1Tu3LbMBDkz1gkQJAACJHgQ5RpUZKlyC+NbE+KuHCKdPn/cjM4idRrbLlIlxQ7dxgAi927gxeIIViUwsXDnIkhBjyBHxpau9gh2O05dPe6M14YZ7hdbSBNBRZnSMsWobKoxlNCUbcY2jHKuoUtG6RFgySrUTdzlPUUV0wjH7X4+es3PeA5Zm0qcGEwCBQY1/RaKC2EsghlBh5nENJSdHAuIp0TnConICsndI8UimKCqJpBXi8hb+7AdXFkZY8UH5XoiieUezxKIUdzxDf3kJN76OUreFLBZ1ul/q422xolB+stDutKNRw4ycJANSuo2w2Rmqc3mMcfULM19PKFkG7eEY0X8E8acQqvUyFUDj19hFo8I3B1kjlFsiVzMFUgiNJezeeEoRsTg6ickpogtj0pk/ZsZA7zM8L+kJstP0aYNUhW38mumq8RX3+j7vtM9WRfUkiRJ9RtvXiBdPZna8j2AXrxTMRdoy4S7ic9ATcjRNUcIp/sUbQIbXOxIUeEvXX3pXYWj6G/bvmU9CNc2j8j/Bv4T/gvEP4BVfhvDwXqiYcAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"React Redux의 단 한개의 Provider\" title=\"React Redux의 단 한개의 Provider\" src=\"/static/73081aeeaa2eb509b8f6fc74e786104d/80977/redux-provider.png\" srcset=\"/static/73081aeeaa2eb509b8f6fc74e786104d/e9ff0/redux-provider.png 180w,\n/static/73081aeeaa2eb509b8f6fc74e786104d/80977/redux-provider.png 313w\" sizes=\"(max-width: 313px) 100vw, 313px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</p>\n<p>React Redux는 Redux DevTools로 상태 변경을 추적할 수 있어 편했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGklEQVQoz32TyY7aQBCG/TCRBobFbAa8gBds2iteMRgwKFFmwoFTpEg55JIn/6MuxhJBUQ6fqrrc9XdVu0sI8hpR+Rl2WIJt9lBXG2h2DNWOyZL/EWtYOAlZnWXYbC+Elx4RFWcIPy43nI7v8LITvOQAJ9qBbSrYQQnTzWF6BfzsCNPLSYTFFcK8RljUiLYXEuXY4Q6rYAthoXsYz1cQJR0DySBGM4tikuKgOr/heHlHVp4RJBW8qMSXtxuut+8I0wrrcAs/3oOFW1oLquFjqjjoDFR0hxrafRmTuYW1n2G5CmGxmBI2RQ0vqWCwFAG1V8N0M8LycrJ2UECQly40M4CqexhODbR6MoaSARYUWJgBehMDI5VhojJM1TUm8gqjqYnxzCR/MDUhSgZEyURfMiDoVEUC202h6C7Gc4vEN9kBjptClNcQFRf9iY6xtMBEWmA41iCOVPSGCtq9OVoPCGGyR1rUSIoTifKqHC/D4fwVcX7Aq3hPeu3Ld78vE60Py2OPCLw93ir/GZ2BQqfwu5xr9/ZI5CnpfwjtflPu36e9dO/C3aH6z0qe6TSCXKxpo7kP7r90Z9QmX3Px52+cJo/7n9oS+YJiBpjrPmZL745+t/wZOEFJT0K1IorxfdOFi6UTE9yXNAaTpYiLE60FPi6Wv4Xu5jAe4C/fifZkLb+gGJ8aPi1l/Q278xVLlkKzE1SXK37++k17/gDkH6SeFOFKTgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Redux Devtools 확장프로그램\"\n        title=\"Redux Devtools 확장프로그램\"\n        src=\"/static/ad22190a0206f51108d87305d457fde2/37523/redux-devtools.png\"\n        srcset=\"/static/ad22190a0206f51108d87305d457fde2/e9ff0/redux-devtools.png 180w,\n/static/ad22190a0206f51108d87305d457fde2/f21e7/redux-devtools.png 360w,\n/static/ad22190a0206f51108d87305d457fde2/37523/redux-devtools.png 720w,\n/static/ad22190a0206f51108d87305d457fde2/5205c/redux-devtools.png 833w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>React Redux는 기본적인 성능 최적화를 구현했기 때문에 action을 dispatch해도 store 값이 변하지 않았더라면 store 값을 사용하는 컴포넌트가 리렌더링되지 않는다.<br>\n하지만 이건 store 값에 대한 얘기고, useState 훅 같이 React의 상태관리는 상태 업데이트만으로도 여전히 리렌더링을 유발한다.</p>\n<p>예를 들어 React 상태를 사용하는 A 컴포넌트와 Redux store 값을 사용하는 B 컴포넌트가 있다.<br>\nB 컴포넌트를 단독으로 사용한다면 store 값이 변경될 때 빼고는 리렌더링이 발생하지 않는다.<br>\n하지만 A 컴포넌트가 B 컴포넌트를 포함한다면 A 컴포넌트의 상태가 변할 때마다 B 컴포넌트도 같이 리렌더링된다.<br>\n당연한 얘기지만 둘을 혼용하다보면 헷갈릴 때가 있다.</p>\n<h3 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h3>\n<p>React Redux가 할 수 있는 것이 많기 때문에 Context의 상위 호환이라고 느껴졌다.<br>\n하지만 프로그램 규모와 정말 필요한 기능이 무엇인지 고민해서 선택해야 한다.</p>\n<p>Context는 props drilling을 피하고 싶을 때, 몇 상태만 전역적으로 사용하고 싶을 때, useState 혹은 useRuder와 같이 최소한으로 사용하는 것이 좋다.<br>\nReact Redux는 Redux 패턴을 사용하고 싶을 때(단방향으로 상태를 관리, 추적하고 싶을 때), 많은 상태를 전역적으로 사용하고 싶을 때 사용하는 것이 좋다.</p>\n<p>또, React Redux를 사용할 때는 어떤 상태를 store에서 관리하고 어떤 상태를 React 상태로 관리할 것인지 경계를 정해놓는 것이 좋다.</p>\n<hr>\n<p>참고</p>\n<ul>\n<li><a href=\"https://react-redux.js.org/tutorials/quick-start\">React Redux Quick Start</a></li>\n<li><a href=\"https://react-redux.js.org/tutorials/typescript-quick-start\">React Redux TypeScript Quick Start</a></li>\n<li><a href=\"https://redux.js.org/tutorials/essentials/part-1-overview-concepts\">Redux Essentials, Part 1: Redux Overview and Concepts</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#react-redux\">React Redux</a></p>\n<ul>\n<li><a href=\"#store-%EB%A7%8C%EB%93%A4%EA%B8%B0\">store 만들기</a></li>\n<li><a href=\"#provider%EB%A1%9C-store-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0\">Provider로 store 제공하기</a></li>\n<li><a href=\"#createslice%EB%A1%9C-action-reducer-%EB%A7%8C%EB%93%A4%EA%B8%B0\">createSlice로 action, reducer 만들기</a></li>\n<li><a href=\"#store%EC%97%90-%EB%A7%8C%EB%93%A4%EC%96%B4%EB%91%94-reducer-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">store에 만들어둔 reducer 연결하기</a></li>\n<li><a href=\"#%EB%A7%8C%EB%93%A0-%EC%83%81%ED%83%9C%EC%99%80-action-%EC%83%9D%EC%84%B1-%ED%95%A8%EC%88%98-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">만든 상태와 action 생성 함수 사용하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#context--usereducer-vs-react-redux\">Context + useReducer vs React Redux</a></p>\n<ul>\n<li><a href=\"#%EA%B3%B5%ED%86%B5%EC%A0%90\">공통점</a></li>\n<li><a href=\"#%EC%B0%A8%EC%9D%B4%EC%A0%90\">차이점</a></li>\n<li><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"React Redux를 어떻게 적용했는지, Context API와 React Redux는 무엇이 다른지 정리해봤다. React Redux를 적용할 때 Redux Toolkit을 함께 사용했다. React Redux 공식문서에서도 Redux Toolkit을 사용하길 권장하며, 실제로 사용해보니 작성해야할 코드가 줄어들어 편했다. React Redux Redux는 action이라고 불리는 이벤트를 사용해 상태를 관리하는 패턴이며, React Redux는 Redux를 React에서 사용할 수 있는 라이브러리이다. React Redux는 Redux store에 상태를 저장하고 action을 dispatch해서 store의 상태를 변경한다.  React Redux는 현재 React에서 지정한 공식 Redux UI 바인딩이다. 만약 React를 사용중이며 UI 바인딩에 Redux 개념을 이용하고 싶다면 React Redux 라이브러리가 가장 권장된다는 뜻이다. React에서 제공되는 기능과 …","frontmatter":{"date":"November 23, 2023","title":"React Redux 적용하기","categories":"react"},"fields":{"slug":"/react-redux/"}},"next":{"id":"7dc36a02-e77b-563a-b9be-49dfd3ab1a44","html":"<p>React에서 props drilling을 피하고 싶거나 변수를 전역적으로 사용하고 싶을 때 상태 관리 라이브러리를 사용하곤 한다.<br>\nReact는 상태 관리가 가장 중요한 만큼 관련된 다양한 라이브러리들이 있다.<br>\n가장 대중적인 React Redux 부터 Recoil, Justand, Jotai, MobX 등등.</p>\n<p>하지만 라이브러리를 사용하기 전에 React 자체 기능을 사용할 줄 알아야 한다고 생각한다.<br>\n라이브러리도 React 기능을 사용해서 만들어졌기 때문이다.<br>\n그래서 React 자체 기능인 Context API를 사용해 전역적으로 변수를 사용하는 방법을 정리했다.</p>\n<h2 id=\"context-api-란\" style=\"position:relative;\"><a href=\"#context-api-%EB%9E%80\" aria-label=\"context api 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context API 란?</h2>\n<p>Context는 props로 전달하지 않고도 컴포넌트 트리 전체에 정보를 공유할 수 있는 수단이다.</p>\n<p>props로 전달하지 않는다는 것은 props drilling을 피할 수 있는 장점인 동시에 상태가 숨겨져 코드를 직관적으로 알아보기 힘들다는 단점을 의미한다.<br>\nprops를 넘겨주는 것은 단순히 번거로운 작업이 아니라 명시적으로 어떤 props가 넘어갔는지를 알려주는 작업이다.</p>\n<p>따라서 Context를 남용하지 않는 것이 좋다.<br>\n만약 컴포넌트에 직접적이지 않은 요소는 Context를 사용하는 대신 children으로 처리해 props 수를 줄일 수 있다.</p>\n<h3 id=\"context-만들기\" style=\"position:relative;\"><a href=\"#context-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"context 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 만들기</h3>\n<p><code class=\"language-text\">createContext</code>로 Context를 만들 수 있다.<br>\n<code class=\"language-text\">createContext</code>의 인자로 default 값을 넘겨주면 Context가 <code class=\"language-text\">Provider</code>로 감싸져 있지 않을 때 사용된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> createContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ThemeContext <span class=\"token operator\">=</span> <span class=\"token function\">createContext</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"context-제공하기\" style=\"position:relative;\"><a href=\"#context-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0\" aria-label=\"context 제공하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 제공하기</h3>\n<p><code class=\"language-text\">Provider</code>로 컴포넌트들을 감싸면, <code class=\"language-text\">Provider</code> 하위의 모든 컴포넌트에서 <code class=\"language-text\">Provider</code>의 <code class=\"language-text\">value</code>에 할당된 값에 접근할 수 있다.<br>\n<code class=\"language-text\">Provider</code>를 사용하지 않으면 Context에서 default 값을 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/context/ThemeContext'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>theme<span class=\"token punctuation\">,</span> setTheme<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TodoInput</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">TodoList</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ThemeContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"context-사용하기\" style=\"position:relative;\"><a href=\"#context-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"context 사용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 사용하기</h3>\n<p><code class=\"language-text\">Provider</code> 하위의 컴포넌트에서 <code class=\"language-text\">useContext</code> 훅을 통해 Context를 가져올 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/context/ThemeContext'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">TodoInput</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>ThemeContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// …</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"context는-상태를-변경할-수-없다\" style=\"position:relative;\"><a href=\"#context%EB%8A%94-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%B3%80%EA%B2%BD%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\" aria-label=\"context는 상태를 변경할 수 없다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context는 상태를 변경할 수 없다.</h3>\n<p>위처럼 사용해보면 props로 받지 않고 useContext를 통해 상태를 받을 수 있다.<br>\n그런데 상태를 변경하는 함수도 전역적으로 사용하고 싶다면 어떻게 해야 할까?<br>\nContext는 단지 값을 props 없이 전달해줄 뿐 값을 변경해주진 않는다.<br>\n그래서 상태를 변경하는 함수도 똑같은 과정을 거쳐 Context로 전달해야 한다.</p>\n<h2 id=\"usereducer와-context-api-적용하기\" style=\"position:relative;\"><a href=\"#usereducer%EC%99%80-context-api-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\" aria-label=\"usereducer와 context api 적용하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>useReducer와 Context API 적용하기</h2>\n<p>Context와 useReduer를 사용해서 변수를 전역적으로 사용했다.<br>\nuseState로 state, setState를 만들어 둘 다 전역적으로 공유해도 되지만 useReducer를 사용하는 것이 상태 변경과 관련된 로직이 한 곳에 모여 보기 좋았다.</p>\n<p>참고로 TypeScript로 작성했다.</p>\n<h3 id=\"context-만들기-1\" style=\"position:relative;\"><a href=\"#context-%EB%A7%8C%EB%93%A4%EA%B8%B0-1\" aria-label=\"context 만들기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 만들기</h3>\n<p>useReducer를 사용할 것이기 때문에 먼저 reducer를 만든다.<br>\n어떤 action일 때 어떤 상태 변화가 생기는 지 작성한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">gameStateReducer</span><span class=\"token punctuation\">(</span>gameState<span class=\"token operator\">:</span> GameState<span class=\"token punctuation\">,</span> action<span class=\"token operator\">:</span> Action<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>action<span class=\"token punctuation\">.</span>type<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'READY'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'START'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'playing'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">case</span> <span class=\"token string\">'END'</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">'over'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Provider에서 useReducer로 상태와 dispatch 함수를 만들고 각각을 Context로 넘겨준다.<br>\nContext가 두 개이기 때문에 Provider를 중첩해서 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">GameState</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ready'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'playing'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'over'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Action</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'READY'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'START'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'END'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">GameStateDispatch</span> <span class=\"token operator\">=</span> Dispatch<span class=\"token operator\">&lt;</span>Action<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> GameStateContext <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createContext</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>GameState <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> GameStateDispatchContext <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">createContext</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>GameStateDispatch <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">GameStateProviderProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">GameStateProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> GameStateProviderProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>gameState<span class=\"token punctuation\">,</span> dispatch<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useReducer</span><span class=\"token punctuation\">(</span>gameStateReducer<span class=\"token punctuation\">,</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GameStateContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>gameState<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GameStateDispatchContext.Provider</span></span> <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>dispatch<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">GameStateDispatchContext.Provider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">GameStateContext.Provider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Context가 필요할 때마다 useContext 훅과 필요한 Context를 import할 필요가 없도록 use상태 훅을 만들었다.<br>\nuse상태 훅을 통해 Context가 초기값일 경우 Error를 발생시켰다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useGameState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> gameState <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>GameStateContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gameState <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Game state context is null.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> gameState<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">useGameStateDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> gameStateDispatch <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>GameStateDispatchContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>gameStateDispatch <span class=\"token operator\">===</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Game state dispatch context is null.'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> gameStateDispatch<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"context-제공하기-1\" style=\"position:relative;\"><a href=\"#context-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0-1\" aria-label=\"context 제공하기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 제공하기</h3>\n<p>위에서 state Context와 dispatch Context의 Provider들을 묶어 한 Provider로 만들어 export했다.<br>\n하지만 단지 하나의 상태에 대한 Context이고 또 다른 Context도 존재하기 때문에 <code class=\"language-text\">ContextProvider</code> 컴포넌트를 만들어 Provider들을 하나로 묶어줬다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> GameStateProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/contexts/GameStateContext'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ScoreProvider <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/contexts/ScoreContext'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ContextProviderProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  children<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">ContextProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> children <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ContextProviderProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GameStateProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ScoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ScoreProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">GameStateProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 모든 컴포넌트에서 Context들을 사용할 수 있도록 가장 상위 컴포넌트에 배치했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> ContextProvider <span class=\"token keyword\">from</span> <span class=\"token string\">'src/components/ContextProvider'</span><span class=\"token punctuation\">;</span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ContextProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">App</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">ContextProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"context-사용하기-1\" style=\"position:relative;\"><a href=\"#context-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-1\" aria-label=\"context 사용하기 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Context 사용하기</h3>\n<p>만들었던 use상태 훅들을 import해서 상태를 사용하거나 변경했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useGameState<span class=\"token punctuation\">,</span> useGameStateDispatch <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'src/contexts/GameStateContext'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> Game <span class=\"token keyword\">from</span> <span class=\"token string\">'src/components/Game'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> GameResult <span class=\"token keyword\">from</span> <span class=\"token string\">'src/components/GameResult'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> gameState <span class=\"token operator\">=</span> <span class=\"token function\">useGameState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> gameStateDispatch <span class=\"token operator\">=</span> <span class=\"token function\">useGameStateDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">startGame</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">gameStateDispatch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> type<span class=\"token operator\">:</span> <span class=\"token string\">'START'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">고양이 정말 좋아하세요?</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Title</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">StartButton</span></span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>startGame<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">!==</span> <span class=\"token string\">'ready'</span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        증명하기\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">StartButton</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">===</span> <span class=\"token string\">'playing'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Game</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token punctuation\">{</span>gameState <span class=\"token operator\">===</span> <span class=\"token string\">'over'</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">GameResult</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>이렇게 라이브러리 없이도 충분히 상태를 전역적으로 사용할 수 있다.<br>\nContext 값에 변화가 있을 때만 Context 값을 사용한 컴포넌트가 리렌더링되기 때문에 Context 사용으로 인한 추가적인 리렌더링 문제도 없었다.<br>\n(Context 값으로 객체를 사용하지 않아 그로 인한 리렌더링 문제도 없었다.)</p>\n<p>하지만 Context를 추가할 때마다 Provider를 중첩해줘야 한다는 점은 참 불편했다.<br>\nProvider 배열을 받아 하나의 Provier로 만들어주도록 만들 수는 있지만 여러 Provider들이 중첩되었다는 본질은 바뀌지 않는다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 342px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACEElEQVQ4y9WUSbeaQBCF/TUyNNDNICAKOIBT1Gd8SU52WWSX/7+/OVUNRByevmUW91TT0F9X3SodmE4EQ4Sg2MpyR01s1HsX9b5tJWTCcSDDCdb7d4b6cQE1yhGlJSZljXSyQJQUyPIl4myGKM4RxjmmZc179G5oBwjTEr9+/2HGgLKR/hiG5cO0A5i2jhZlTdEdwfZijm3mjkogmr22Ii/IOA5cfww330DO95CzL/DXZ3jlltdycWCoQRc1h2/U7FN2DKQHmVWQyzeo9RmyOjHI33yHXB4hkhnsKOcDz8QeGmSoG0HVJ/hbDWHw8ghvvkew/wmv2N407lr/gA2dSvcoy/orw5ys5kv0Be/6EPl7Zyp6wMtNL5lB1icNXRzg5mvI6g2q0mDTS7qD19Ae0GhnSaWQxYYPtyXLxZEvoDU14BJ0bz24vJG66YYTDeLy2wZ9gzNe6pIvuvo4wxZKMyVCeMlc+1md4E7XLBorf/eD49BUN6AbDy9fCJlCkX+rM9TqDLfYcNkkgtKzIYLnTen8FCGccAq1OHDJIp7BHhUQ6Zx/BGJU6mF/BuyXHkCVO57NoSkZQB4alupgd5vyaJ4ISl45WcVlU2PIU8pyOHS7kh96eBcqAjjp4mqMDvDKHSw/65X9IbD7yA4g4pJ9oyF3Jyu9LjafB3ZZWj572MnQuvbxtQxf/EN4GfgZ/T/Av1BCtXr7vK1YAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"복잡한 Provider들\"\n        title=\"복잡한 Provider들\"\n        src=\"/static/27b99807f21c4c7dd5600649a238ae67/e2c15/complex-providers.png\"\n        srcset=\"/static/27b99807f21c4c7dd5600649a238ae67/e9ff0/complex-providers.png 180w,\n/static/27b99807f21c4c7dd5600649a238ae67/e2c15/complex-providers.png 342w\"\n        sizes=\"(max-width: 342px) 100vw, 342px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>보기만 해도 어지럽다. 😂</p>\n<p>따라서 Context는 정말 필요할 때만 사용하는 것이 좋겠다.<br>\n테마같은 상태를 전역적으로 사용하고 싶지만 상태 라이브러리까지는 사용하고 싶지 않을 때 사용하면 좋을 것 같다.</p>\n<p>그리고 Context는 props 없이 값을 전달할 수 있는 기술일 뿐, 전역적으로 변수를 사용하기만을 위한 기술이 아니라는 것을 잊지 말자.<br>\n또한 상태를 변경하기 위해 useReducer를 같이 사용했을 뿐 useState나 useReducer 없이도 사용할 수 있는 기술이다.</p>\n<hr>\n<p>참고</p>\n<ul>\n<li><a href=\"https://react.dev/learn/scaling-up-with-reducer-and-context\">React - Scaling Up with Reducer and Context</a></li>\n<li><a href=\"https://react-typescript-cheatsheet.netlify.app/docs/basic/getting-started/context/\">React TypeScript Cheatsheet - Context</a></li>\n<li><a href=\"https://react.vlpt.us/using-typescript/04-ts-context.html\">TypeScript 와 Context API 활용하기</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#context-api-%EB%9E%80\">Context API 란?</a></p>\n<ul>\n<li><a href=\"#context-%EB%A7%8C%EB%93%A4%EA%B8%B0\">Context 만들기</a></li>\n<li><a href=\"#context-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0\">Context 제공하기</a></li>\n<li><a href=\"#context-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0\">Context 사용하기</a></li>\n<li><a href=\"#context%EB%8A%94-%EC%83%81%ED%83%9C%EB%A5%BC-%EB%B3%80%EA%B2%BD%ED%95%A0-%EC%88%98-%EC%97%86%EB%8B%A4\">Context는 상태를 변경할 수 없다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#usereducer%EC%99%80-context-api-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0\">useReducer와 Context API 적용하기</a></p>\n<ul>\n<li><a href=\"#context-%EB%A7%8C%EB%93%A4%EA%B8%B0-1\">Context 만들기</a></li>\n<li><a href=\"#context-%EC%A0%9C%EA%B3%B5%ED%95%98%EA%B8%B0-1\">Context 제공하기</a></li>\n<li><a href=\"#context-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0-1\">Context 사용하기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EA%B2%B0%EB%A1%A0\">결론</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"November 15, 2023","title":"Context API와 useReducer를 사용해서 전역적으로 변수 사용하기","categories":"react"},"fields":{"slug":"/context/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://heony704.github.io","comments":{"utterances":{"repo":"heony704/heony704.github.io"}}}}},"pageContext":{"slug":"/react-redux/","nextSlug":"/context/","prevSlug":""}},"staticQueryHashes":["161131432","1956554647","2938748437"]}