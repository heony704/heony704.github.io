{"componentChunkName":"component---src-templates-blog-template-js","path":"/oci-ssh-error-troubleshooting/","result":{"data":{"cur":{"id":"3e7ca2ec-da0a-5a2e-b957-a0157ecf6926","html":"<blockquote>\n<p>클라우드: Oracle Cloud Infrastructure<br>\n이미지: Canonical Ubuntu 20.04</p>\n</blockquote>\n<p>OCI ubuntu 인스턴스에 올려놓은 애플리케이션이 갑자기 작동을 멈췄다.<br>\n확인하려고 PuTTY로 접속했는데 서버의 public key랑 private key가 일치하지 않는다고 떴다.<br>\n분명 과거에 일치했었고 세션에 저장까지 해둔 key인데..!<br>\n해킹된건지 뭐 때문인지 감이 안잡혀서 부트 볼륨을 떼서 분석해보기로 했다.</p>\n<p>해당 인스턴스로 SSH 접속이 불가능한 상태이기 때문에 드라이브를 분리한 뒤 다음 과정대로 트러블슈팅했다.</p>\n<ol>\n<li>장애가 발생한 인스턴스의 부트 볼륨을 분리</li>\n<li>해당 부트 볼륨을 다른 멀쩡한 인스턴스의 블록 볼륨에 연결</li>\n<li>디렉토리 마운트 &#x26; SSH 키 새로 생성</li>\n</ol>\n<h2 id=\"드라이브-분리하기\" style=\"position:relative;\"><a href=\"#%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0\" aria-label=\"드라이브 분리하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>드라이브 분리하기</h2>\n<p>장애가 발생한 인스턴스의 부트 볼륨 탭에 들어간다.</p>\n<blockquote>\n<p><strong>부트 볼륨</strong>이란?<br>\n컴퓨트 인스턴스 부트를 위해 사용되는 이미지가 포함된 스토리지 장치</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA5ElEQVQoz6WQ3W7DIAxGef8H3bSsTWDBBv+Qb8Jpu3ZXk3ZxZGzAOnZSEbgZ3B1mhnXLKKVARF5Q1WC+iXg7P+czpsodrf9cvi8XbNsaTfZ9BxFFzDmji2CMAfcT1VNm1sY4opbWXTAZ7tBpWAjLJSOXAm6M1joqEYgYtVZwayDmsOEm2KpgzRXXNeNaCGkpHbVpNAxLH2hd0HuH+Wk91zEtVO1ldAuJge3zgvVjATMjfbGgiT52GCO4R+7mj/q98TMW43oYV6owP5AKSRjGg18f/oLdVnW44W1jJOoahneL/6H4BmHnI87oAaugAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"부트 볼륨의 부트 볼륨 분리 버튼\"\n        title=\"부트 볼륨의 부트 볼륨 분리 버튼\"\n        src=\"/static/23300f81d2ab3688257862c3c46b6702/37523/oci-boot-volume.png\"\n        srcset=\"/static/23300f81d2ab3688257862c3c46b6702/e9ff0/oci-boot-volume.png 180w,\n/static/23300f81d2ab3688257862c3c46b6702/f21e7/oci-boot-volume.png 360w,\n/static/23300f81d2ab3688257862c3c46b6702/37523/oci-boot-volume.png 720w,\n/static/23300f81d2ab3688257862c3c46b6702/302a4/oci-boot-volume.png 1080w,\n/static/23300f81d2ab3688257862c3c46b6702/07a9c/oci-boot-volume.png 1440w,\n/static/23300f81d2ab3688257862c3c46b6702/46435/oci-boot-volume.png 1885w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>해당 부트 볼륨을 분리해준다.</p>\n<h2 id=\"다른-인스턴스에-드라이브-연결하기\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EB%A5%B8-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"다른 인스턴스에 드라이브 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다른 인스턴스에 드라이브 연결하기</h2>\n<p>멀쩡한 인스턴스의 연결된 블록 볼륨 탭에서 블록 볼륨 연결을 누르면, 연결할 수 있는 볼륨들을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABt0lEQVQoz3WSzXLaMBSF/czddNFVXyAz3TQs2gaSOIBjyZCZdtGXAQqWbWiIZYiNwfbXkQqp81PNfCNdLc6ce+9xRqMRhiAILKe3e+Piui79fh9v6DGdTIiThOl0SpIkaJ1R1zWHw4Gqqp5w2kJtcSEkQh4RgjAM2W42pKnm8fGRvCgoyz1lWT7D8X0fQ9ullJJet8vVxRe6F98473SYz+fc36+haYCGpq5omvoVzq0IcIcCX5ycGsGAj58HfPh0xddrj5EU/FooJmpNtPxNvFozSzS6qDg0UNawP+IYsU7P43Ignlo2Dt+fdXl3dsN5b8B4JAlDxULFTGczFqFiHsaEUYyyJPYdqgjHOLseCkatORqn38eSnz/uGAfSzlMpxcN6zWq1srPMdEqmNVqnpOkDeZ6zKwqcW1/aloMXgoFxGph6bP+iKEZrbWdpthzbOqNpGrtdcxteCZ4W067NCOL4r+ByuWS73VIUBbvdjv1+b/m3ZSHpewLZEmhH6PSnVIQ5p9wZN3Xd2Cy2cTxfctn3Mdt+GfB2bQSNw6LIj4GungX6zWD/z525TbB1lrHJS+r6bTEj+AcLh/Nb+FY1jwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"블록 볼륨 연결 탭에 표시된 연결할 수 있는 볼륨들\"\n        title=\"블록 볼륨 연결 탭에 표시된 연결할 수 있는 볼륨들\"\n        src=\"/static/b34d282b6615fc9b646921ab2b6d705b/37523/oci-block-volume-connect.png\"\n        srcset=\"/static/b34d282b6615fc9b646921ab2b6d705b/e9ff0/oci-block-volume-connect.png 180w,\n/static/b34d282b6615fc9b646921ab2b6d705b/f21e7/oci-block-volume-connect.png 360w,\n/static/b34d282b6615fc9b646921ab2b6d705b/37523/oci-block-volume-connect.png 720w,\n/static/b34d282b6615fc9b646921ab2b6d705b/302a4/oci-block-volume-connect.png 1080w,\n/static/b34d282b6615fc9b646921ab2b6d705b/610c0/oci-block-volume-connect.png 1295w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>여기서 좀전에 분리한 부트 볼륨을 연결해준다.</p>\n<p>위 까지는 테스트용 인스턴스에 여분의 볼륨을 부착(attach)하는 과정이고, 아래부터는 테스트용 인스턴스와 볼륨을 연결(connect)하는 과정이다.<br>\n구체적으로 알고싶다면 <a href=\"https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/overview.htm#attachtype\">여기</a>를 참고하자.</p>\n<p>연결하기 위해서 테스트용 인스턴스에서 iSCSI 접속 명령을 해준다.</p>\n<blockquote>\n<p><a href=\"https://docs.oracle.com/en-us/iaas/Content/Block/Concepts/iscsiinformation.htm\">iSCSI</a>란?<br>\nInternet Small Computer System Interface<br>\n볼륨을 인스턴스에 연결하기 위한 <strong>프로토콜</strong></p>\n</blockquote>\n<p>연결한 블록 볼륨에서 <code class=\"language-text\">iSCSI 명령 및 정보</code>를 확인하면 iSCSI 명령어를 알려준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABAElEQVQoz41Ru27DMAzU/39If6JT9wIFOnUN0qSRbNeKZb1MyleQdQIX6BABB0onUnekzDj08L2FvXzBOYdlWVBrVdz2EonoIZi3g8fz+wmHs8PVjwjzjBgjUkqKEAJyzmitgZk1rut6P+9BzDAvHz2eXgcMaYWsXCpKKbhOE+YYEVNSAXm0lKpR7oQTR1L1WwlwazAlF1W7WAfrHKYY1KX3XttNOavLGNPmPGuUs/DfPuBkB9huROdnmLIwUmXElNUZMd1bEKF9a7Tjb5yIH4+fcM6i8wGG9QFCa9ssiLcB8z9D/8tJvnzYNE2gpeLsKwxtyvukh7DlUq0K5qa//AMJlSDWtHvvgQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"연결된 블록 볼륨의 iSCSI 명령 및 정보 버튼\"\n        title=\"연결된 블록 볼륨의 iSCSI 명령 및 정보 버튼\"\n        src=\"/static/d84f41b8030e010dbecdac4e71a2b5db/37523/oci-connected-block-volume.png\"\n        srcset=\"/static/d84f41b8030e010dbecdac4e71a2b5db/e9ff0/oci-connected-block-volume.png 180w,\n/static/d84f41b8030e010dbecdac4e71a2b5db/f21e7/oci-connected-block-volume.png 360w,\n/static/d84f41b8030e010dbecdac4e71a2b5db/37523/oci-connected-block-volume.png 720w,\n/static/d84f41b8030e010dbecdac4e71a2b5db/302a4/oci-connected-block-volume.png 1080w,\n/static/d84f41b8030e010dbecdac4e71a2b5db/07a9c/oci-connected-block-volume.png 1440w,\n/static/d84f41b8030e010dbecdac4e71a2b5db/6bfbb/oci-connected-block-volume.png 1514w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAABJ0AAASdAHeZh94AAACK0lEQVQ4y51TW46bQBDkAjlBTpfz5Cj5yVeUK0TKf1YbBYwNODbzngHmAVTUba+zf1kFqZjumaaofkyVUsI8z3DOIeWMUgryf6CUFcRVrduGaZ4hxRXYV9ye/dX6dpCYqojvyN8+ANnAOwtvFayR0GqEdxrOKARv4KyC0YLPrBbwVmMOFsFp/iYtHiVHVLn/iunze+RJoD32+Pn8jObQ4tR1kEpBCAkhBKRUGIVgexxvvlKaY7wPyDmipAVV7r5g+vQOZVEYzlc0dY3T6YS+61HXNZqmQd/3MMYghIBpmuC9Z9s7x3bOBduakImwmGfkHx+xZwfsBdgz9jVhXyOwZfYfwO38sU8+iCxyfMkJ1ZIKTNgQ791eYkSMkTtGKykKhDDBh4B5XngaeD8ExrreOpxzRkWG0ZJTUkrBWstB5NMoXccRvy8XBtlCSjjvuX7jOEJK+fg5E9KLDs7nM9eK1uv1iuPxiF91jfZ4RNu2aJoDBooZBrYPhxbDMDDJNM2sksAKh+GMy+UCzSo1Q2sNpW8rgRRrbR77FEN7MSYmLDzcBRVJJYV0SOlS15ZlYdtYyyRSaU7VGAvrHBTvKRZAsaSM6s83pVBBc2aHDlOKKCU/GsPN8IEVESnNItWYYnl8ponJtu1+U6irpIaK6+5zRarIpgC+gPvLVcTDf41t2/4SEsHT0xO6rrt37XYjKCUipXTe+jAhpUUfUgqR2584VS7BfRReOvgvpJTxB9+tgjWoAvUKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"iSCSI 명령어\"\n        title=\"iSCSI 명령어\"\n        src=\"/static/a619945e8ab24c22e55fa7876678533d/37523/oci-connected-block-volume-iscsi-command.png\"\n        srcset=\"/static/a619945e8ab24c22e55fa7876678533d/e9ff0/oci-connected-block-volume-iscsi-command.png 180w,\n/static/a619945e8ab24c22e55fa7876678533d/f21e7/oci-connected-block-volume-iscsi-command.png 360w,\n/static/a619945e8ab24c22e55fa7876678533d/37523/oci-connected-block-volume-iscsi-command.png 720w,\n/static/a619945e8ab24c22e55fa7876678533d/59822/oci-connected-block-volume-iscsi-command.png 916w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>IP 주소랑 볼륨 IQN을 넣은 명령어를 자동으로 만들어줘서 복사만 하면 된다.<br>\n명령어에 대한 설명은 <a href=\"https://docs.oracle.com/en-us/iaas/Content/Block/Tasks/connectingtoavolume.htm#Connecting_to_a_Volume\">여기</a>에서 참고할 수 있다.</p>\n<p>테스트용 인스턴스에 SSH 접속해서 명령어를 실행했을 때, 아래 같이 successful이라고 뜨면 성공적으로 연결된 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 9.444444444444445%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAABJ0AAASdAHeZh94AAAAcElEQVQI1yWMSwoEIRBDG0TU9lelUmrf/3IDc4bOUM7ikSxecs05obTWwMwgItRa4b3Hfd+IMaL3jv08kDkhIhD55xjjuCGEV7211vfae4OYz4iYzoExBs45WGvPoJSCnDNSSgftinrqWGtf9Yjo8wPTOC6g249A2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에서 iSCSI 명령어 실행 후 볼륨 연결이 성공한 모습\"\n        title=\"터미널에서 iSCSI 명령어 실행 후 볼륨 연결이 성공한 모습\"\n        src=\"/static/3a6145e14b7d2bde14c12f7e8c63455b/37523/ssh-connect-success.png\"\n        srcset=\"/static/3a6145e14b7d2bde14c12f7e8c63455b/e9ff0/ssh-connect-success.png 180w,\n/static/3a6145e14b7d2bde14c12f7e8c63455b/f21e7/ssh-connect-success.png 360w,\n/static/3a6145e14b7d2bde14c12f7e8c63455b/37523/ssh-connect-success.png 720w,\n/static/3a6145e14b7d2bde14c12f7e8c63455b/302a4/ssh-connect-success.png 1080w,\n/static/3a6145e14b7d2bde14c12f7e8c63455b/f2763/ssh-connect-success.png 1291w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">sudo fdisk -l</code> 명령어로 연결된 볼륨 목록을 확인할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABD0lEQVQoz11RWZKFIAxUQQUCghtv7n/RnuoovnE+UoaY9JJ0IQSklLDkBcxjjBoiAc45xJQgIs8/7z2cv+qs8c26sQZd16Hbjx1nraj1xLZt2PcdZS1Y1xXjOEJiRBBRUL6NMRiGQb8tWO/7/gIky+ycsnEo3YoI2t5UkPOiaubZYVkWxChaf4BarNuqypq68zxRStHmeZ4VxN9k0zTdxAFBAiSKqn0BNmUheG0miNwW/wJ6/3Xx7NK5NxiDlqw1Kp17YyPzx3opyDnD3cu/7EYdHoxR1S+VPMjn56NstK3Dzql1KiJQrVWJcimaH8ehvW0t1tovoA9elfBaHCIjc4K1azLX/9p7rYU1Xve/5V8fFLCq1lPCAwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에 표시된 연결된 볼륨 목록\"\n        title=\"터미널에 표시된 연결된 볼륨 목록\"\n        src=\"/static/4416e12e17de6adfeec1b4f6db0b4b96/37523/connected-volume-list.png\"\n        srcset=\"/static/4416e12e17de6adfeec1b4f6db0b4b96/e9ff0/connected-volume-list.png 180w,\n/static/4416e12e17de6adfeec1b4f6db0b4b96/f21e7/connected-volume-list.png 360w,\n/static/4416e12e17de6adfeec1b4f6db0b4b96/37523/connected-volume-list.png 720w,\n/static/4416e12e17de6adfeec1b4f6db0b4b96/ee9b6/connected-volume-list.png 1041w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">/dev/sdb</code>에 잘 연결되어 있다.<br>\nsda, sdb, sdc … 순으로 이름이 정해지는 듯 하다.</p>\n<p>파티셔닝되고 마운트된 상태이므로 다시 파티셔닝하거나 포맷하지 않는다면 더이상 fdisk 명령어를 사용하지 않아도 된다.</p>\n<h2 id=\"디렉토리-마운트하기\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EB%A7%88%EC%9A%B4%ED%8A%B8%ED%95%98%EA%B8%B0\" aria-label=\"디렉토리 마운트하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디렉토리 마운트하기</h2>\n<p>디스크 안의 데이터에 접근하기 위해서는 디렉토리 마운트를 해줘야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABDUlEQVQoz2VR4Y6GIAwTFUVkMCRRufd/Ph+BXTqPS767H0tZsnVtGZj5iTFKzrklZiEiQZ9SEudW8d6L33fFHbh7WZZFe+ecbNsmIQSZpkmGYZDhPM8n5yxHKY2ZhTML8DgOHVSiEPTIuq4yjqNYa2WeZ0VjzEvUq5TyJE5Q1kBcStECKVSq4vQq7gcwR5EUf5X1IiK1HGNsRFEX0ANhDSqAUNcRVrvdDzJUCP5BVsaYhmUM4aq1s5L2jHpum9+EKKjVaRrFmD+EtabnriTMa8NCrbeGTzHKdV36rl9VLePTzuuQ+yYhWmTfR/F+EGs/FIYHVlPihqCRGXD7+VUMQSGsrs4psffvQef+W/4GxAqa0M76jYUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에 표시된 연결된 볼륨 목록의 sdb1\"\n        title=\"터미널에 표시된 연결된 볼륨 목록의 sdb1\"\n        src=\"/static/6d6753f6c3db493b3849a9a79358c649/37523/connected-volume-list-dev-sdb1.png\"\n        srcset=\"/static/6d6753f6c3db493b3849a9a79358c649/e9ff0/connected-volume-list-dev-sdb1.png 180w,\n/static/6d6753f6c3db493b3849a9a79358c649/f21e7/connected-volume-list-dev-sdb1.png 360w,\n/static/6d6753f6c3db493b3849a9a79358c649/37523/connected-volume-list-dev-sdb1.png 720w,\n/static/6d6753f6c3db493b3849a9a79358c649/38a65/connected-volume-list-dev-sdb1.png 1075w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>연결된 볼륨 목록 중 리눅스 파일시스템인 <code class=\"language-text\">sdb1</code>에 접근할 것이다.<br>\n마운트할 디렉토리를 만들고 명령어 <code class=\"language-text\">sudo mount 디스크주소 디렉토리이름주소</code>로 디렉토리 마운트를 해준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAuklEQVQY03WMy3LDIBAEl5csWAQIIzuOcsn/f2S7RA6pHHLomplDj3yeJ2PcGWPQWqP3zjgO2t7YeyfnTK11ZkqJdV2JMbIsy+zGGETkl2N8oZpRTcS4TklVp3TtSwwh4Jz9K/7H4zwppVFbp5TOVht13MmlUMaYx9tW0bwjYjHmwmOswywBIw4pBnkIRgKS+wtrV7xX7E255Q19fbDmSmpPfMhYm1iWhvcJ5/QHHwnacJJwz4j59vPwDePJWBz5jR1yAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에서 디렉토리 마운트하는 모습\"\n        title=\"터미널에서 디렉토리 마운트하는 모습\"\n        src=\"/static/f03772c4f30b873522fabe7170cc6588/37523/mount-directory.png\"\n        srcset=\"/static/f03772c4f30b873522fabe7170cc6588/e9ff0/mount-directory.png 180w,\n/static/f03772c4f30b873522fabe7170cc6588/f21e7/mount-directory.png 360w,\n/static/f03772c4f30b873522fabe7170cc6588/37523/mount-directory.png 720w,\n/static/f03772c4f30b873522fabe7170cc6588/302a4/mount-directory.png 1080w,\n/static/f03772c4f30b873522fabe7170cc6588/95e27/mount-directory.png 1199w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>만들어둔 디렉토리에 들어가면 <code class=\"language-text\">sdb1</code> 데이터에 접근할 수 있다.<br>\nSSH 접속이 안되는 문제를 확인하기 위해서 <code class=\"language-text\">.ssh</code> 디렉토리의 <code class=\"language-text\">authorized_keys</code> 파일을 확인해봤다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 30.555555555555554%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA9ElEQVQY011PyXLFIAwjCVkwawhb0///TnVs+nroQYPHErKkiCzO8xRc14XnyUgpgayFtYQ73wghIMSAnG9470GW/vTbpnGcBvu+QykFZcwkj+MQMsaG6yIsi4IxHs5FbNuK83Lw/obWG9aVsQqWZcW+O5nFsJQiqWqtkizngpgSDBkY4pROEqbE6QKIDIgIetfT4D+m0KPUAjZn5JxhnZM9Vw0xyjGG5/ohwPnJC0KYR7SGar0hPxl9dPTe8TzPnEdHrQVjDNmzbnwNacLz1/uKprU6+dbkVe/3K5/q74IJBhuzIe8qf5IDVRow/5lZ9wE3+wEGQItu1qHEkAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에서 authorized_keys 파일을 확인하는 모습\"\n        title=\"터미널에서 authorized_keys 파일을 확인하는 모습\"\n        src=\"/static/c246e3201a4db80a8c258453b783b98b/37523/authorized_keys.png\"\n        srcset=\"/static/c246e3201a4db80a8c258453b783b98b/e9ff0/authorized_keys.png 180w,\n/static/c246e3201a4db80a8c258453b783b98b/f21e7/authorized_keys.png 360w,\n/static/c246e3201a4db80a8c258453b783b98b/37523/authorized_keys.png 720w,\n/static/c246e3201a4db80a8c258453b783b98b/302a4/authorized_keys.png 1080w,\n/static/c246e3201a4db80a8c258453b783b98b/68947/authorized_keys.png 1281w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>이유는 모르겠지만 가지고 있던 private key와 안 맞는 public key가 들어있었다.</p>\n<p>나중에 OCI에서 온 메일에 따르면, 예약된 공용 IP를 가지고 있던 일부 무료티어 고객들이 리소스에 접근할 수 없는 문제가 생겼다고 한다. 😂<br>\n어쩐지 인스턴스 두 개 다 같은 문제가 생겨서 이해가 안갔는데 클라우드 문제였다니!</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 86.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAADO0lEQVQ4y3WUS28bVRiGZ8GWBaJIiAWsEKIEsYUtQmLNsj+AsOwCQYUUJVIupg5qg0AIqgpBK/ELULuBNKJJiRzbtR2nMUl9i8czHntsj2fs2hPPmXnQObbTlMuRHr3fnMt7zpn5vtHW1taIx+Osr68rvXo1rnRldRU5try8TCwWY3X6LPV8vLi4yMLCAktLSwoNYDweEwQBQggVj0YjBoOBotfrMRwO6ff7Z8g+z/POVK6bNc3udHmQ2COZTJLJZNjd3VUUCgWy2Sz7+/uqP5/Pk8vl1Fi5XKbdbtNqtZSh3Fg23/fRRuUC3vYdzFabuq6rSc1mE9u2sSxLLfxnbJqmmjczlfPlaeUttVG3Tad0hNGw6Ha7DEcjAiEIRKhUiFBxFochQSAmiKeEUaRelyYnTFrEf7fof/j3nPH4FM0XglKmQOn+HrVUnkeFMsmjKsnDMtmiTtX2qLRchYxPbA+97VFuuRwYDgd1R42Z3QEj/xTtcWvARz8f8MGNHG/EE1y8lmLuelpx8Xqat2S8kebtjYe8eS3N61+leGUtwTtfP+Re0eGbBwavfrnHu99lsb0h2r7h8eFPh7z3Q54XVvZ4aTXJy7EkF1YSPL+0i/b59pQdtM+20T69j/bJJu/fyJHRPf4oObwWS/DcFzs03SHawB9z968Ov+Yt7hxY3H3UVPrbcZetSp/NkstmscfvxR6bpR5bJZd7FY8dOyTrhKQ7AVtNwZ/W6eTKyI9i6XhNA9c26bctei0D3+0gnrgwHkJ0CuE5ZP/N7+HHm/DLbfh2A7a3JoktgoBhMkW9pqvUkdTNBrphUpf5ZrfpOI7SVsumL9PlcRGhaYQvXiCcm1Nx8PG8+tZaKARPUilKx8dUqlVqtRrValWh67qqCsMwVBJbjQYD3wfbJpqfh8uXia5cgUuXiG7detawWiphmCaVSkWZSk5OThTSsNFoKJWmIoqeydCzOAynhskkR4eH1HRdlZgsp5nOkOUm+ySyxBCCaApBMImjCE3+Kfx0mqZp0ul2cV0Xx3FUGcprdjodhaxhqfIHoE40PSWz00bRU8NRoYBRq6krSWShS6S5VLnBbCOps8XnCcNQGf4Nt0ax0SJ6qsoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"OCI로부터 온 이슈 메일\"\n        title=\"OCI로부터 온 이슈 메일\"\n        src=\"/static/1e38f9c9ca0ad0d792c77c34818a3fe0/37523/oci-issue-mail.png\"\n        srcset=\"/static/1e38f9c9ca0ad0d792c77c34818a3fe0/e9ff0/oci-issue-mail.png 180w,\n/static/1e38f9c9ca0ad0d792c77c34818a3fe0/f21e7/oci-issue-mail.png 360w,\n/static/1e38f9c9ca0ad0d792c77c34818a3fe0/37523/oci-issue-mail.png 720w,\n/static/1e38f9c9ca0ad0d792c77c34818a3fe0/302a4/oci-issue-mail.png 1080w,\n/static/1e38f9c9ca0ad0d792c77c34818a3fe0/000c7/oci-issue-mail.png 1137w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다시 SSH 접속할 수 있도록 만들기 위해 새로운 SSH 키를 생성해야 한다.<br>\n<code class=\"language-text\">ssh-keygen -t rsa</code>로 key pair를 생성했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABGElEQVQoz6XS227DIAwGYE6JMacAodL6/k/pGzzhNto0aZvWXXwikEB+LKsxBpVS6DgOUWuVec6ZjqOIlBKFEMh7/7STR0cAlgAcOWdIKfUwboNzLnyOk1tv3HrnWivnnDnGyLlkefbes7OWrXDCGMvOOdbasFLq4TzPWWuda1xaazIvJc8Y40REkVKa1tqplPrZ7Xbj1hqPMfh+f+PeuyhHkYRLSkl49JIUEWX8DAAkvVofrmuFEGTzvu+8bdvj5XWNv1h/CwGlFmtBG/3aQZcdgGMMEnktmJVM/+NQjzgBYBprpKjGmKm0+r3437kKvBJqrV+v3UWauTXqZ382dKSUPHkEaeAYgXJGSgkJAKSxt237aOQv3gFMhdMo1z0DoAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"터미널에서 새로운 SSH 키를 생성하는 모습\"\n        title=\"터미널에서 새로운 SSH 키를 생성하는 모습\"\n        src=\"/static/e6adc2ccb5f5bb367463ad99f0bd1925/37523/ssh-keygen.png\"\n        srcset=\"/static/e6adc2ccb5f5bb367463ad99f0bd1925/e9ff0/ssh-keygen.png 180w,\n/static/e6adc2ccb5f5bb367463ad99f0bd1925/f21e7/ssh-keygen.png 360w,\n/static/e6adc2ccb5f5bb367463ad99f0bd1925/37523/ssh-keygen.png 720w,\n/static/e6adc2ccb5f5bb367463ad99f0bd1925/302a4/ssh-keygen.png 1080w,\n/static/e6adc2ccb5f5bb367463ad99f0bd1925/60a1a/ssh-keygen.png 1321w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><code class=\"language-text\">authorized_keys</code> 파일의 내용을 새로 생성한 public key로 바꾸고 private key는 따로 복사해둔다.<br>\n테스트용 인스턴스에서 해당 볼륨을 해제하고 원래 있던 인스턴스에 연결하면 복사해둔 private key로 SSH 접속을 할 수 있다! 🎉</p>\n<p>아래와 같은 경고가 있으니 테스트용 인스턴스를 앞으로도 사용할 예정이라면 마운트 해제와 접속 해제 명령을 꼭 해주자.</p>\n<blockquote>\n<p>분리 전 드라이브를 마운트 해제하고 접속 해제 명령을 실행해야 합니다. 아니면 인스턴스 재부팅을 실패합니다.</p>\n</blockquote>\n<h3 id=\"서버를-재부팅해도-디렉토리에-마운트된-상태-유지하기\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%9E%AC%EB%B6%80%ED%8C%85%ED%95%B4%EB%8F%84-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%EC%97%90-%EB%A7%88%EC%9A%B4%ED%8A%B8%EB%90%9C-%EC%83%81%ED%83%9C-%EC%9C%A0%EC%A7%80%ED%95%98%EA%B8%B0\" aria-label=\"서버를 재부팅해도 디렉토리에 마운트된 상태 유지하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버를 재부팅해도 디렉토리에 마운트된 상태 유지하기</h3>\n<p><code class=\"language-text\">fstab</code>에 등록해서 서버를 재부팅해도 디렉토리 마운트 상태를 유지할 수 있다.</p>\n<p>먼저 <code class=\"language-text\">sudo blkid</code>로 UUID를 알아낸다.<br>\nblkid는 블록 아이디를 의미한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABB0lEQVQoz42RyXLEIAxEmTGLDUYswksOtvP/P9kp5MzkkENy6AJU1JO6pY7jQM4ZRARmlnspRUSJpP6qxUiIRKCU4L3HOI5wzmGaJnlba6BewJQTWmuozCi1oNZ6i6vU+58QAoiSNOn3cXQCfYE7VJ3n+Z6AW4fdgJQztNYiYwyezyeUUn/rvD6RSxEo8z3Vvu9Iif4H+AU8P1Brz+nOsFtclkUadAveTwjBwnd5ixAcwtxzMxgGBa1/NAwPqOta0VpEzhHrtordDm7LIidzAXMEN0JrhG3L2LYCognGKFirYN0trR99KSdq5bdlgX1D39lyQ0p94oB5jrLtEGYYa+HcKLL23vYXCPufNk1CE30AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"sbd1의 UUID\"\n        title=\"sbd1의 UUID\"\n        src=\"/static/ef5f786f5232057a6c5b5ba2c4c64572/37523/blkid.png\"\n        srcset=\"/static/ef5f786f5232057a6c5b5ba2c4c64572/e9ff0/blkid.png 180w,\n/static/ef5f786f5232057a6c5b5ba2c4c64572/f21e7/blkid.png 360w,\n/static/ef5f786f5232057a6c5b5ba2c4c64572/37523/blkid.png 720w,\n/static/ef5f786f5232057a6c5b5ba2c4c64572/302a4/blkid.png 1080w,\n/static/ef5f786f5232057a6c5b5ba2c4c64572/d7e70/blkid.png 1286w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>원하는 디스크의 UUID를 복사해서 <code class=\"language-text\">fstab</code> 파일에 붙여넣어야 한다.<br>\n<code class=\"language-text\">sudo vi /etc/fstab</code> 명령어로 <code class=\"language-text\">fstab</code> 파일을 수정할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA8klEQVQoz62R23KDMAxEVwZ8URIodqDt/3/odkxFx6Vkkoc+nFm8Qpq1DJSZyTsqwA7gJXim6OkcCIBQEB2YRjDF73+qP5j+QZAJ3I3ZyI2uBCYCnkAwrUQjNLU6UD4JjMZ0GLqfq8oJMHVNQikEEoEbATW9ELgao9W18bXpqd7QDny3FPXKbwSK6dUaJmsOJ7pfezDt24RmbMX+fOE/yOOz1GTrjVBtlhsPqKk/PEJsHsh8kdmW+mq6Jzj3YTsbbWf744QHaVvSibeZ+D/WdWUpmfdlYS6FS9WcN0opVFWKCLuu+4Vzjt77jfrd9z1DCPwCEdfjkiMdv44AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fstab 파일\"\n        title=\"fstab 파일\"\n        src=\"/static/72dba26592ca34d49acf9df5e3a693e9/37523/vi-fstab.png\"\n        srcset=\"/static/72dba26592ca34d49acf9df5e3a693e9/e9ff0/vi-fstab.png 180w,\n/static/72dba26592ca34d49acf9df5e3a693e9/f21e7/vi-fstab.png 360w,\n/static/72dba26592ca34d49acf9df5e3a693e9/37523/vi-fstab.png 720w,\n/static/72dba26592ca34d49acf9df5e3a693e9/302a4/vi-fstab.png 1080w,\n/static/72dba26592ca34d49acf9df5e3a693e9/68947/vi-fstab.png 1281w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위 파일을 아래처럼 복사한 UUID랑 디렉토리 주소를 넣어서 수정한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 14.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAXklEQVQI152OMRLCMAzAZKfBTliY+P9P1euViYGBQadRAtpBGWD+ICLMkWamSRo7pBCQRALz8lHhrvAJNlhfXh/mGPZa9mp7tvM95YVMZGE8sO7AIdnC9rqFuKt/cgLJtz08i5PHSQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"fstab 파일에 UUID와 디렉토리 주소 추가\"\n        title=\"fstab 파일에 UUID와 디렉토리 주소 추가\"\n        src=\"/static/7f4f0408ffc71707fbb5e9b74dfa56b7/37523/vi-fstab-result.png\"\n        srcset=\"/static/7f4f0408ffc71707fbb5e9b74dfa56b7/e9ff0/vi-fstab-result.png 180w,\n/static/7f4f0408ffc71707fbb5e9b74dfa56b7/f21e7/vi-fstab-result.png 360w,\n/static/7f4f0408ffc71707fbb5e9b74dfa56b7/37523/vi-fstab-result.png 720w,\n/static/7f4f0408ffc71707fbb5e9b74dfa56b7/302a4/vi-fstab-result.png 1080w,\n/static/7f4f0408ffc71707fbb5e9b74dfa56b7/68947/vi-fstab-result.png 1281w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>인스턴스에서 알 수 없는 장애가 발생한 경우, 이런 식으로 해당 인스턴스의 부트볼륨을 분리해서 다른 인스턴스에 연결해 원인을 파악하고 문제를 해결할 수 있다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B8%B0\">드라이브 분리하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8B%A4%EB%A5%B8-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4%EC%97%90-%EB%93%9C%EB%9D%BC%EC%9D%B4%EB%B8%8C-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">다른 인스턴스에 드라이브 연결하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%EB%A7%88%EC%9A%B4%ED%8A%B8%ED%95%98%EA%B8%B0\">디렉토리 마운트하기</a></p>\n<ul>\n<li><a href=\"#%EC%84%9C%EB%B2%84%EB%A5%BC-%EC%9E%AC%EB%B6%80%ED%8C%85%ED%95%B4%EB%8F%84-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC%EC%97%90-%EB%A7%88%EC%9A%B4%ED%8A%B8%EB%90%9C-%EC%83%81%ED%83%9C-%EC%9C%A0%EC%A7%80%ED%95%98%EA%B8%B0\">서버를 재부팅해도 디렉토리에 마운트된 상태 유지하기</a></li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"클라우드: Oracle Cloud Infrastructure 이미지: Canonical Ubuntu 20.04 OCI ubuntu 인스턴스에 올려놓은 애플리케이션이 갑자기 작동을 멈췄다. 확인하려고 PuTTY로 접속했는데 서버의 public key랑 private key가 일치하지 않는다고 떴다. 분명 과거에 일치했었고 세션에 저장까지 해둔 key인데..! 해킹된건지 뭐 때문인지 감이 안잡혀서 부트 볼륨을 떼서 분석해보기로 했다. 해당 인스턴스로 SSH 접속이 불가능한 상태이기 때문에 드라이브를 분리한 뒤 다음 과정대로 트러블슈팅했다. 장애가 발생한 인스턴스의 부트 볼륨을 분리 해당 부트 볼륨을 다른 멀쩡한 인스턴스의 블록 볼륨에 연결 디렉토리 마운트 & SSH 키 새로 생성 드라이브 분리하기 장애가 발생한 인스턴스의 부트 볼륨 탭에 들어간다. 부트 볼륨이란? 컴퓨트 인스턴스 부트를 위해 사용되는 이미지가 포함된 스토리지 장치  해당 부트 볼륨을 분리해준다. 다른 인스턴스에 드라이…","frontmatter":{"date":"April 15, 2022","title":"OCI ubuntu 인스턴스 SSH 접속 장애 조치","categories":"oci"},"fields":{"slug":"/oci-ssh-error-troubleshooting/"}},"next":{"id":"e8709aae-919a-5aa6-a552-9ccc88144719","html":"<p>코딩 테스트 문제를 풀다보면 마주치게 되는 크루스칼 알고리즘에 대해 알아봤다.</p>\n<h2 id=\"what-is-kruskals-algorithm\" style=\"position:relative;\"><a href=\"#what-is-kruskals-algorithm\" aria-label=\"what is kruskals algorithm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What is Kruskal’s algorithm?</h2>\n<blockquote>\n<p>최소 비용 신장 부분 트리를 찾는 알고리즘<br>\n변의 개수를 E, 꼭짓점의 개수를 V라고 하면 이 알고리즘의 시간복잡도는 O(ElogV)</p>\n</blockquote>\n<p>노드와 간선으로 이루어진 그래프가 있을 때, 가장 적은 비용으로 노드를 연결하는 방법을 찾는 알고리즘이다.<br>\n주로 간선마다 가중치가 있을 때 가장 적은 비용으로 연결하기 위해 사용한다.</p>\n<h2 id=\"how-it-works\" style=\"position:relative;\"><a href=\"#how-it-works\" aria-label=\"how it works permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How it works</h2>\n<p><a href=\"https://ko.wikipedia.org/wiki/%ED%81%AC%EB%9F%AC%EC%8A%A4%EC%BB%AC_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\">위키백과</a>의 크루스칼 알고리즘 예제를 통해 어떻게 동작하는지 알아보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVQ4y6WUW0vDQBCFv6bBa41WTS+pTdOLiiJeQMQHn8QXEcEXEV/1D/g3BH90GTkr26WpBgcWNpmds3POzCxADHSBHcqtRgXrAG/AO7AJJMB2CZjbLwUYJ8CDn9Q60ALWgAI40LcLNAYND+AQmAA50AbuBRi7A4mCnNWBXWAs4CfgHEgFlImFuzCdR7ujfRT4DPgDeBST0Az0QknMaNDzvrdEv6/lsh7r4sQ7m0qCGcC69HBmNE+B5pyMnMaOybCsC/rejYPAt6IO8IuYS8ciBIpUnTMdyhXg2qehQlzJV4jBCPgCXgJ23xkZvU/gWXpk6qlU1W8LuC5tJ6Jtvv1QP8tuWZmuKtgC9hQcVtx8196/gYCjRdPTDdarqLXmnLV/R1SYW6NzBxyrZYYqYFO+2BvV6C+zviEpfDPal5Il01swoqLVFrC4BW6qvkq/WS+YoH/Zj3ZTxQgTS1U+uAEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 1\"\n        title=\"크루스칼 알고리즘 과정 1\"\n        src=\"/static/d51654688aca7ce7693c1d517bc048eb/772e8/example1.png\"\n        srcset=\"/static/d51654688aca7ce7693c1d517bc048eb/e9ff0/example1.png 180w,\n/static/d51654688aca7ce7693c1d517bc048eb/772e8/example1.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>간선 옆에 있는 숫자는 변의 가중치를 가리킨다.<br>\n지금은 모든 간선의 색이 검정색이다.<br>\n앞으로 연결된 선은 녹색으로, 연결할 수 없는 선은 빨강으로 나타낸다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABnElEQVQ4y63TzWpTURQF4K9JarltUmtq+qPVJlbTiNDgDzqsIIgTHTgQRMGpOPAdnIn4CD5IEcQOxIn6BM59DeXcu5Pe3KZqoWt0Lneftddeax8WzGIFbQmZaZhxDKxpeqHtFRbNmcfSEWSj86kKx008whn28dOKLwa5vkwPV9BBIy6cQ6tEsI3LuIhVPMC9on4P36zaN/BmfKERNmwF8UMM45yIzodFI6Wdg16/8F7XZ1f9wEu1yjhn8RqPye2oIpFeR734/I27hj4a+jouWorLG7hQUr0VDU5XGm4fEO7lpLM+uZGTF0jj7hQmH8Im+qWAepPB7YTK73lSo46blXQblXFbEchi1JYwn0ut+2BXPf/ZRTOKk/ELkfqdCKMbyV7COzwJ8onxBjJv8TTG2QilnXxPi7Vph9IsyPpB1C+t13icOfIXk0WDXqhpTkk8rc3tiqfL/3pNiWw91K2F8meT+3YowCNR7ZQ83sW1IO+GJWkDajHZctTW/uett6YsdArpVhAnf5/Hjh4LM3+Z4n685RPFeqzaiWDs3R/Q5SWGCrqPWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 2\"\n        title=\"크루스칼 알고리즘 과정 2\"\n        src=\"/static/48e5154a419643824008c7c82228fb78/772e8/example2.png\"\n        srcset=\"/static/48e5154a419643824008c7c82228fb78/e9ff0/example2.png 180w,\n/static/48e5154a419643824008c7c82228fb78/772e8/example2.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>가중치가 가장 작은 간선을 고른다.<br>\n지금처럼 가중치가 가장 작은 선이 두개을 경우 아무거나 골라 선택하면 된다.<br>\nAD 와 CE 중 AD를 선택하고, AD는 연결된 선이기 때문에 녹색으로 변경한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVQ4y63TTUtUURwG8N+8KaNjmmM6lq9pNhElOGHtDIqgRS2qTRS0jRZtCoJ2rgqsVds+R0hQSUQE1Sdo33eojXHOPTNeHacIfBbnHs49/5fn+T+HQRWMY1RA1X4o7HtaxNPu44aae0Y9wCH9BjDSI1l73xfXcud8BdeVHGYLP4z7pBn7q5rHCRzJhRzFUC7xSSzqMxvvrbnpjKtZz5v4asKWpvVOQDnJsJASX8Ny2i/iWJRoXJ8v+O10jNoIy0+8MOeDU77jflQmjzE8xA2iHDt4FdnVvHQ5yrEdDsNy0bK3ln3uXB1JwVOYznW9kAoMx7hf+GbBI62dKpsxacU7K1mFiED3LEHkLgTdljxW8ATvrcb4Z7glhW3HSq0cxdk90y3voluJA5q2ru6jVpTtTZvygBJKXltTionmUIsWyrw5mKZ+Pg1jTsEEjqvYUHcbM3kKgV5T1XPiz6Wk3ViaaiPZZjR1Wo3Jsnsz8Tus7MJuOv2RSHY5FJhP3dT2mXiwzWpHkGJkVVfo8ZoSQrLJ1F0jdX4ndbwX7QH2xN5KQeM1onkbSeOp5IBiYlbPve5/YqjL0NmQzqXEQd+7yaP/hcJfWFzBJQeMyWS1A0FHuz+CmDdhQdUmHgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 3\"\n        title=\"크루스칼 알고리즘 과정 3\"\n        src=\"/static/0bb51d0b4f79b24d33f61918e38d2f53/772e8/example3.png\"\n        srcset=\"/static/0bb51d0b4f79b24d33f61918e38d2f53/e9ff0/example3.png 180w,\n/static/0bb51d0b4f79b24d33f61918e38d2f53/772e8/example3.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>나머지 간선 중 가중치가 가장 작은 CE를 선택한다.<br>\nloop를 만들지 않는 선이니까 연결할 수 있다. 녹색으로 바꿔준다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACDklEQVQ4y63UTUuUURgG4GucGcfPtNF0+tCRNFOiMTSNViJFi6BaRAsXEUSbchFEtC3aRGGLfkD/oEXQIgnSkGiTFrSsfav6A26Mc+Y4M5YFgTe857w873m+7ud+D+3y6ENRQKudkNnR2oTPf5pLOlxTtIBOBW3o/kuwrffmuOZq9klclA1FreCrPu+NoUWrIYymqvPJ4UBMVkf4PqJZGfvMuuy488iyhI/6vTPmYc0hlwKOpP0CJqJz1XYwUtSn4BM2HItej8PyHYuGrBi3jpuRmUb04jYuE+mo4xm+6fDU2UjHZjCGZc6ENyo+1I52p/EcwkBD1cMpQVf024jdDbtrqp5lKQbNe2uymiEitFmpTX47ypHDBRn3sGwm+j/CFcktBFpLWVojT2XZbdNtiVVtIR8HNOCBXqumIm2vt1puDZOR9dxsai887Yq6tCnK6kitTqdhBBX047C8RT3mMdgoztDemG5PXHLLHSeU44FiekpySqnCfOJ2JElnMO49sk7VpZqTU4iHv+iyZtSqGesqfuq3qSmqsD7xIzhdI6QpclqS2VJHpkHxgYP78W2/6wYtO+qHimk3MK8Q+f0docPx7aZs2l/hZcod/qAXqYYWc0TxlhKHgee9yTPXoIYGDa9EPVaZGU8yribrrF0Z9eOBw5NJp4GQq2lw/4XMP26fczhjlxEq3bNbwWpk/AJut0bvIj98lAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 4\"\n        title=\"크루스칼 알고리즘 과정 4\"\n        src=\"/static/cabd139a9f2238dfe4529f77c274412d/772e8/example4.png\"\n        srcset=\"/static/cabd139a9f2238dfe4529f77c274412d/e9ff0/example4.png 180w,\n/static/cabd139a9f2238dfe4529f77c274412d/772e8/example4.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>같은 방식으로 가중치가 6인 DF를 선택한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACZUlEQVQ4y63UyYsVVxQG8F/VG/rZdrfvdWs/h+jTbqc4tEObpHERREQhEASHheJCEUHMOkgWWRgXKiq6kOyCCxcKbgTBTN0+e+GiE0XQhX+BggO6SrZP7q2inBpXHri3ilvnfuc73zmn6FJBEw0n8QQd3JW4jg1IJKazEo5/fLxY1SFb/aij5ao6eiPoJVzIwWYiLYAr7+zBNmKnNBB7JKxBD6wybkDbJjds1jbklprTgaAFqhrSAmAplqhqYY4tdlnruyzETdwz14QV2vgb/6q5bTj505gXVllqD9armJ2DLUC/QVV38b/VMUxM/yXOa7njSxO4puQgfuOHKxyd1Oif5xh2l6u63xPrIh7q8astUaKw4va9Ff4ykkzljqmGpu6Hffpe0WMs8iljmMgy0/g/TBn2s3UZWLA/ImjVhI3h8ATWUj/D/MfUot8+SaxoNS8iy/0kiSm2fa2j4hz2h8qvYyzc+sdoeEwN6O4kesLNPW+7I8B1FalW9GKhEwZMGvUM45LIsjIj1q6UXvbtU3pvMCum1FCvdmsoRfChvCO/iAyT2LdDKs7qj7yG3gqbmhcqWK471bvXYceMalmYBtWy1VTKqyrqOCMHWI5FWKYv78gk28ppWS0qdEcjfWCZtm/cN+K1po7U/CL87AgQWigpCLVisGKaEtJS/vE5folvTUcsMm6lV0Z85XAsTZc50wzgINZ8PJPBfsf1PNJk7Mnsa802YvPOjROSaVmP/LIBHCj4FhamZDRXpRV7M8ldsiIVGsU9pD2SewdBDrxfmA9t+n9L+gmP7djhM1vIa9bnAivYvwHan2cYKNfI/QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 5\"\n        title=\"크루스칼 알고리즘 과정 5\"\n        src=\"/static/c8c06f27836789bc40770e16dcc9a6fe/772e8/example5.png\"\n        srcset=\"/static/c8c06f27836789bc40770e16dcc9a6fe/e9ff0/example5.png 180w,\n/static/c8c06f27836789bc40770e16dcc9a6fe/772e8/example5.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음으로 가중치가 작은 간선인 AB와 BE 중 임의로 AB를 고른다.<br>\nAB를 연결하기로 결정하면 BD는 loop를 만드는 선이므로 연결할 수 없는 선이 된다.<br>\n만약 AB가 아닌 BE를 연결하기로 결정했다면 AB가 연결할 수 없는 선이 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACtklEQVQ4y63TSWhdZRQH8N9335CXvpfh5iU1qTGNSWxik9pgTGtRbHHhXFxoxUVVUBA0G1dCNm5UXIgrNQ7UARqLUBGEoEGTVKspWGwpxQEqsSjtQhAXWYhdXbn3XZ8UWkTwwPedbzjz+R+KWtGL2HM4iwQfCc7l5w0uSestDd6f3+u3N/igsofd6mmJAa/rykx8gpOEc0JmdJjZEtWGTjHdkrhxidmGe0UGeBdrepy01bK6FdMW7HLUkEUVLxO4Rqz+YKrdwgj9M9RXajoTiv13usOEuwtU+Byrei0bdQSL+ErFiuHwqZ1+NmHM3gmuTigfbNf9HW3f0PrWVoXJP/FbFqHweLqfwZuucsS1lnBIwT4c5om3efILcbzJTHWfh177Q6W01ihrugYPE32rFubs6UsIifxnr1FLrotO5NWNdBpXWm3T/js1D2RyNcfcbN5QjVImt4Zjhj1je9OLVfyqbNn16cNTGKfrAL1nqDSdvt/gYdFUWLDj0GxWGo7aIVEwhzTlaDiP6ripVO+9LtXzQXtSblTjvsZvWbcNj3QwciDrfp/jbnRCf1hwQ9aqVDmtZKGcQaAUveOWC9QSqqcpvzGkcrCuNWlV3M3Gmxhcj9Tm6+KElp9mxD3bvaBmf8gan1MIGS4ny7Fnpx5z/+45Iy/tzOBQSrv6PdWlirazVF4NwimKCx26Ejr20IMtTWMZOoNioZSiK6tj7GujFu3ypUk/6POj4pZBrsR5Wl9h4wTDHyIdjBDZjO5/5icQFfPzL3g+c9RTmNUXfWYsWrfNtEeHuOdCnI2pFy+ewCswdvFTIecf44PURd7B+TyRShbMODal8Isa49uZa6bh1JuAa1I6JdNkCQxm2AxNTNLxdza5kQGNRmzOnezHkMtSuORrdHkFt+Guf5H5z5Qiuuv/MtaM7C99NJWkCaLwYgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 6\"\n        title=\"크루스칼 알고리즘 과정 6\"\n        src=\"/static/f2cc4c093655497782ab6cd7e1cbe360/772e8/example6.png\"\n        srcset=\"/static/f2cc4c093655497782ab6cd7e1cbe360/e9ff0/example6.png 180w,\n/static/f2cc4c093655497782ab6cd7e1cbe360/772e8/example6.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다음으로 가중치가 작은 BE를 연결하면 BC, DE, FE가 연결할 수 없는 선이 된다.<br>\nBCE 루프를 생성하기 때문에 BC가 빨강색으로 변하고, DEBA 루프를 생성하기 때문에 DE가 빨강색으로 변하고, FEBAD 고리를 생성하기 때문에 FE가 빨강색으로 변한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 200px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC90lEQVQ4y5XUTWxVVRAH8N+976OvfR/ta2vl2VKsPKklLU0pYKuQAmoUFq4aYjSygRg/VxoXxp2RaAJLMX4HE8REEpRokEKlGKPEGkwsRll0gSQ2BhPdqIkLrzn3tUDUBU5y75lzzpyZ//zPzKEghy5UPYdLSHBO5CDuRiTyHzKVa4zd/1hfJm+nrZ6WWOGwNrSmTvfigCgOViW2Z0SLPgqIfy82JlXW4F6ZoJ7Ad7p8bbWTOsxY5wO3mXaTGQXvEIegXVqfCacz9NI3Se1sWWtCtmebewzZXkxNj+Mry0zrdwrT+FLBJ1ZGx41ZsFrd5AD1hNzbFZ3nKc1ReHVAZuQv/GIoxIr2hf+PaWo3OmXASRySsROv8/gBHp1Rbe/2WHGHB1/+QyG30KA4fH1HiOeVon3uDP6yYTHd2WzYlOHozCKrsXbXKZ6rKP8U2NuR2pV8ZqOjVuQpJuHcRcxa6UmjV67k49Q4Z9ra4PwJDNL+At2XKFwO+kpjjKatjd4zvud+UopO2yCRtQeTgeNhViUpb6NhONiueDFSCX4u4L5G2Lw2pafaqb+Bb9TMGvOFnmjKSPwtjorSwNnmcG8y8Zsm/qSUUJwjv79P4a0OLUlRdoTlgwxeiJXf7VRNaPrhYdXOES/q9EDM8ssZR3Fa1AP5qudHd5mc2K++d0N6KJeQn6flUJPKLM3zsUBz9lhHul8ZHXOD14xfH1gP6JpSj7JxNlXzplWd0W/KmE+N+F7Nebl6L+N4n5YjdNQZ+gi3biKatc7GFNQSROLsov4znk1rt5bZpTee0R//ao31dq/nrqQnbdPQhmmFFM4SnVb3iPEoIZMsOkxZDPJhCqPRt+EGD9MS0inY0h8KO9J8jLbPKb/UpDlNc0aLxIBtmBBfQRocbMGqwOhiCTRarRzRfFVObqF3M/0LeeWEQstWu7W5uVEb1yAhbI2QVdpE6VIkSh5qTIoNKHeEB+R/ye3YdNV8LvyyloDVuGaM/5ZA9G+LeoV46cH8G6CGqdqoLrz2AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"크루스칼 알고리즘 과정 7\"\n        title=\"크루스칼 알고리즘 과정 7\"\n        src=\"/static/17bb04229ea1e68405697c6b7f4f97e8/772e8/example7.png\"\n        srcset=\"/static/17bb04229ea1e68405697c6b7f4f97e8/e9ff0/example7.png 180w,\n/static/17bb04229ea1e68405697c6b7f4f97e8/772e8/example7.png 200w\"\n        sizes=\"(max-width: 200px) 100vw, 200px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>남은 간선 중 가중치가 작은 EG를 연결하고 나면 FG가 연결할 수 없는 선이 되면서 알고리즘이 끝난다.</p>\n<p>이렇게 최소 비용 신장 부분 그래프가 완성됐다.</p>\n<h2 id=\"how-to-apply\" style=\"position:relative;\"><a href=\"#how-to-apply\" aria-label=\"how to apply permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to apply</h2>\n<p>이런 크루스칼 알고리즘을 직접 구현하려면 어떻게 해야 될까?</p>\n<p>위 예제를 통해 알아봤을 때 크루스칼 알고리즘 구현의 핵심은 다음과 같다고 생각한다.</p>\n<ol>\n<li>연결할 수 있는 선들 중 가중치가 작은 선 먼저 연결하기<br>\n→ 선의 연결여부를 판단할 수 있도록 구현</li>\n<li>선을 연결했을 때 loop(cycle)이 형성되는지 판단하기<br>\n→ 각 노드의 부모를 저장해서 연결될 때마다 부모를 최솟값으로 갱신</li>\n</ol>\n<p>1번의 선의 연결여부를 판단하는 코드는 알고리즘을 적용할 문제에 따라 다르게 구현하고, 2번의 cycle이 형성되는지 판단하는 코드는 각 노드의 부모를 나타내는 배열을 만들고 간선들을 최소 비용으로 연결할 때마다 두 노드의 부모 중 최솟값으로 갱신해주도록 구현했다.<br>\n이렇게 하면 두 노드의 부모가 같다면 연결했을 때 cycle이 생기는 것을 알 수 있다.<br>\n또, 모든 노드가 연결 가능하다면 알고리즘이 끝났을 때 모든 노드의 부모가 하나로 통일된다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#what-is-kruskals-algorithm\">What is Kruskal’s algorithm?</a></li>\n<li><a href=\"#how-it-works\">How it works</a></li>\n<li><a href=\"#how-to-apply\">How to apply</a></li>\n</ul>\n</div>","frontmatter":{"date":"March 23, 2022","title":"크루스칼 알고리즘","categories":"algorithm"},"fields":{"slug":"/kruskals-algorithm/"}},"prev":{"id":"fede7ad0-a5e9-505d-b17c-0f2ab4e0e379","html":"<p>비동기 작업을 제어하기 위해 콜백 함수를 중첩해서 사용하면 콜백 지옥에 빠질 수 있다.<br>\n콜백 지옥에 빠져 코드의 들여쓰기 수준이 너무 깊어졌다면 가독성도 떨어지고 나중에 코드를 수정하기도 힘들어진다.</p>\n<p>이런 콜백 지옥을 막기 위해 사용할 수 있는 방법은 다음과 같다.<br>\n이 개념들을 이용해서 <strong>비동기 작업을 동기적으로 표현</strong>할 수 있다.</p>\n<ul>\n<li>Promise</li>\n<li>Generator</li>\n<li>async/await</li>\n</ul>\n<p><code class=\"language-text\">Promise</code>와 <code class=\"language-text\">Generator</code>는 ES6에서, <code class=\"language-text\">async/await</code>는 ES2017에서 도입됐다.</p>\n<p>이 중에서 결이 비슷하다고 생각하는 Promise와 async/await를 정리했다.</p>\n<p>Generator는 간단하게 설명하면, yield 키워드와 next 메서드를 통해 함수 내부 코드가 순차적으로 실행되도록 제어하는 것이다.</p>\n<h2 id=\"promise\" style=\"position:relative;\"><a href=\"#promise\" aria-label=\"promise permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Promise</h2>\n<p>Promise 객체는 비동기 작업이 어떻게 될지에 대한 결과를 나타낸다.</p>\n<p>Promise는 다음 중 하나의 상태를 가진다.</p>\n<ul>\n<li><code class=\"language-text\">대기(pending)</code>: 이행하지도, 거부하지도 않은 초기 상태</li>\n<li><code class=\"language-text\">이행(fulfilled)</code>: 연산이 성공적으로 완료됨</li>\n<li><code class=\"language-text\">거부(rejected)</code>: 연산이 실패함</li>\n</ul>\n<p>대기 상태에서 벗어나 이행 혹은 거부 상태가 됐다면, Promise가 <code class=\"language-text\">처리(settled)</code>됐다고 말한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvklEQVQY042Qy27EIAxF8/8/SRdJGyIZYh7mYWOqDl1UnY7Us7Tu5dhs8wWttY8HOec59c/M9jwiIgBXSg0hMLOqvhJsIuIAiEhEUkqI+PC9n9a29t1PKQLAGGPOKSJjDBH5KhPRdV0YQs45xthau+/bOYeItdYYo/ceAKy1K4CIb8Y470Vkaz9Y0eM4jDGXtaWU3vvyLKGqMnOttfeuqr9vVlURYeacc0qJmde2//2wRSnlPM9934loPfpc/gRWAphQiMk0ZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Promise 흐름\"\n        title=\"Promise 흐름\"\n        src=\"/static/83fbfe7391fa38a9de7e1b203f35f32d/37523/promise-flow.png\"\n        srcset=\"/static/83fbfe7391fa38a9de7e1b203f35f32d/e9ff0/promise-flow.png 180w,\n/static/83fbfe7391fa38a9de7e1b203f35f32d/f21e7/promise-flow.png 360w,\n/static/83fbfe7391fa38a9de7e1b203f35f32d/37523/promise-flow.png 720w,\n/static/83fbfe7391fa38a9de7e1b203f35f32d/2ad15/promise-flow.png 801w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Promise가 대기 상태에서 연산을 수행하고 이행 혹은 거부 상태로 변한다면(Promise가 처리된다면), <code class=\"language-text\">then</code> 혹은 <code class=\"language-text\">catch</code> 메서드로 추가된 작업을 수행한다.</p>\n<p>이 말은, 연산이 다 수행되기 전엔 Promise에 연결된 다른 작업으로 넘어가지 않는다는 것이다.<br>\n그래서 Promise를 통해 비동기 작업을 동기적으로 표현하는 것이 가능하다.</p>\n<p>다음은 <a href=\"https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Global_Objects/Promise#%EC%98%88%EC%A0%9C\">MDN</a>에서 가져온 예제 코드이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">let</span> myFirstPromise <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 우리가 수행한 비동기 작업이 성공한 경우 resolve(...)를 호출하고, 실패한 경우 reject(...)를 호출합니다.</span>\n  <span class=\"token comment\">// 이 예제에서는 setTimeout()을 사용해 비동기 코드를 흉내냅니다.</span>\n  <span class=\"token comment\">// 실제로는 여기서 XHR이나 HTML5 API를 사용할 것입니다.</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'성공!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 와! 문제 없음!</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">250</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmyFirstPromise<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">successMessage</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// successMessage는 위에서 resolve(...) 호출에 제공한 값입니다.</span>\n  <span class=\"token comment\">// 문자열이어야 하는 법은 없지만, 위에서 문자열을 줬으니 아마 문자열일 것입니다.</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'와! '</span> <span class=\"token operator\">+</span> successMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"asyncawait\" style=\"position:relative;\"><a href=\"#asyncawait\" aria-label=\"asyncawait permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async/await</h2>\n<p>Promise를 사용하다 보면 <code class=\"language-text\">then</code>같은 메서드가 여러개 붙어 가독성이 나빠질 때가 있다.<br>\n이럴 때 <code class=\"language-text\">async/await</code>를 사용하면 더 가독성도 좋아지고 쓰기도 편해진다.</p>\n<p><code class=\"language-text\">async/await</code>에서도 암시적으로 Promise를 사용하기 때문에 Promise 대신 <code class=\"language-text\">async/await</code>를 사용하는 것은 아니다.<br>\nPromise 대신 보다는 Promise의 <code class=\"language-text\">then</code> 메서드를 열거하는 대신이 더 맞는 표현이라고 생각한다.</p>\n<h3 id=\"어떻게-사용할까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C\" aria-label=\"어떻게 사용할까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 사용할까?</h3>\n<p><code class=\"language-text\">async</code>는 비동기 함수 앞에 붙이는 키워드이고, <code class=\"language-text\">await</code>은 Promise 혹은 기다릴 어떤 값 앞에 붙여주는 키워드이다.<br>\n<code class=\"language-text\">await</code>은 <code class=\"language-text\">async</code> 함수 안에서만 사용할 수 있다.</p>\n<p>직접 코드를 보고 이해해 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">resolveAfter2Seconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token string\">'resolved'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">asyncCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'calling'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> result <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token function\">resolveAfter2Seconds</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>result<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// expected output: \"resolved\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">asyncCall</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><code class=\"language-text\">async function</code>에서 <code class=\"language-text\">await</code> 키워드가 붙은 함수(Promise)가 이행되기 전까진 <code class=\"language-text\">await</code> 뒤의 코드로 넘어가지 않는다.<br>\n이런 식으로 비동기 작업마다 <code class=\"language-text\">await</code>를 붙여 Promise의 <code class=\"language-text\">then</code>처럼 사용할 수 있다.<br>\n<code class=\"language-text\">async/await</code>의 목적은 여러 Promise의 동작을 동기스럽게 사용하는 것으로, Generator와 Promise를 묶는 것과 유사하다.</p>\n<h3 id=\"async\" style=\"position:relative;\"><a href=\"#async\" aria-label=\"async permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async</h3>\n<p><code class=\"language-text\">async</code> 함수는 <strong>항상 Promise를 반환</strong>한다.<br>\n만약 <code class=\"language-text\">async</code> 함수의 반환값이 명시적으로 Promise가 아니라면 암묵적으로 Promise로 감싸진다.</p>\n<p>예를 들어 그냥 1을 반환하는 foo 함수가 있다면,</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 foo 함수는 아래 코드랑 같다고 볼 수 있다.<br>\n반환값에 Promise를 넣지 않아도 자동으로 Promise로 감싸준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">function</span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"await\" style=\"position:relative;\"><a href=\"#await\" aria-label=\"await permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>await</h3>\n<p><code class=\"language-text\">await</code> 뒤에 Promise를 써서 해당 Promise가 처리될 때까지 <code class=\"language-text\">async</code> 함수를 멈출 수 있다.<br>\nPromise가 처리되었다면 멈춘 부분부터 실행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[rv] = await expression;</code></pre></div>\n<ul>\n<li>\n<p>expression<br>\nPromise 혹은 기다릴 어떤 값 (보통 Promise 사용)</p>\n</li>\n<li>\n<p>rv<br>\nPromise에 의해 만족되는 값이 반환됨<br>\nPromise가 아닌 경우에는 그 값 자체가 반환됨</p>\n</li>\n</ul>\n<p>반환되는 값이 중요하지 않다면 <code class=\"language-text\">await expression;</code>과 같이 <code class=\"language-text\">[rv] = </code>를 생략하고 사용하면 된다.</p>\n<p><code class=\"language-text\">async</code> 함수의 반환값이 Promise가 아니라면 Promise로 감싸주는 것처럼, <code class=\"language-text\">await</code> 뒤의 expression이 Promise가 아니라면 resolved Promise로 변환시킨다.</p>\n<h3 id=\"asyncawait를-사용해서-코드-간결하게-만들기\" style=\"position:relative;\"><a href=\"#asyncawait%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%EC%BD%94%EB%93%9C-%EA%B0%84%EA%B2%B0%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"asyncawait를 사용해서 코드 간결하게 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>async/await를 사용해서 코드 간결하게 만들기</h3>\n<p>실제로 썼던 코드를 생략해서 가져왔다.</p>\n<p>코드에서 <code class=\"language-text\">channelManager()</code>는 Promise를 반환하는 함수다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">category</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">channel</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    channel<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>channelText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">channel</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    channel<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>channelText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드에 <code class=\"language-text\">async/await</code>를 적용해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> category <span class=\"token operator\">=</span> channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> channel1 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> channel1<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>channelText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> channel2 <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> channelManager<span class=\"token punctuation\">.</span><span class=\"token function\">create</span><span class=\"token punctuation\">(</span>category<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">await</span> channel2<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>channelText<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위 코드랑 아래 코드가 정확히 같게 동작하지는 않지만, 얼추 비슷하게 수정했다.<br>\n한눈에 보기에도 <code class=\"language-text\">async/await</code>를 사용한 게 훨씬 간결하다.<br>\n앞으로 Promise를 사용할 땐 <code class=\"language-text\">async/await</code> 문법도 같이 사용하도록 하자.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#promise\">Promise</a></p>\n</li>\n<li>\n<p><a href=\"#asyncawait\">async/await</a></p>\n<ul>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%EC%82%AC%EC%9A%A9%ED%95%A0%EA%B9%8C\">어떻게 사용할까?</a></li>\n<li><a href=\"#async\">async</a></li>\n<li><a href=\"#await\">await</a></li>\n<li><a href=\"#asyncawait%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%EC%BD%94%EB%93%9C-%EA%B0%84%EA%B2%B0%ED%95%98%EA%B2%8C-%EB%A7%8C%EB%93%A4%EA%B8%B0\">async/await를 사용해서 코드 간결하게 만들기</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"April 18, 2022","title":"Promise와 async/await","categories":"react"},"fields":{"slug":"/promise-async-await/"}},"site":{"siteMetadata":{"siteUrl":"https://heony704.github.io","comments":{"utterances":{"repo":"heony704/heony704.github.io"}}}}},"pageContext":{"slug":"/oci-ssh-error-troubleshooting/","nextSlug":"/kruskals-algorithm/","prevSlug":"/promise-async-await/"}},"staticQueryHashes":["161131432","1956554647","2938748437"]}