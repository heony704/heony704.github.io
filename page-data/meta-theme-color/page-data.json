{"componentChunkName":"component---src-templates-blog-template-js","path":"/meta-theme-color/","result":{"data":{"cur":{"id":"1d39d586-12cf-5b52-9b92-0165fa06c3c9","html":"<p>리액트 웹사이트를 만든 후 디바이스별로 스타일이 잘 적용되었는지 확인하던 중 이상한 현상을 발견했다.<br>\n아이폰에서 사파리로 내가 만든 웹사이트를 접속하면 다른 여타 사이트들과 달리 상단바가 까맣게 표시되어서 매우 거슬렸다.</p>\n<p style=\"display:flex\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 666px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAEDBAUC/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAba0mZpphwpCxDIhKUa6JTD/xAAgEAACAAQHAAAAAAAAAAAAAAAAAQMREhQCBBATICEx/9oACAEBAAEFArGCLIwSxgkiWjcnVxrNwrH5hfZ//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAGxAAAQUBAQAAAAAAAAAAAAAAAQAgMTKRAkH/2gAIAQEABj8Cg6q9aoOsqVUv8Z//xAAfEAADAAEDBQAAAAAAAAAAAAAAARFBEGGRICEx4fH/2gAIAQEAAT8h7YspBb/InT9ijD5GZw3RZp1JydE7ckbck/Q8ZoY4en//2gAMAwEAAgADAAAAELPAfdPP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARIP/aAAgBAwEBPxBQ4//EABcRAQADAAAAAAAAAAAAAAAAAAEQIFH/2gAIAQIBAT8QgTKf/8QAIBABAQACAgEFAQAAAAAAAAAAAREAMRAhwUFRcYHw8f/aAAgBAQABPxBYF5r9MU2Dq1cWtP18YdWvUgjzhNQF905tiREzQZ/NxFEk07OPWwvxm867eJE1LinSEMrykuuP/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"사파리 상단바가 까맣게 표시된 모습\" title=\"사파리 상단바가 까맣게 표시된 모습\" src=\"/static/196b82c2b038531a8fbcd3a1dd41d8cf/b9a87/safari-themecolor-black.jpg\" srcset=\"/static/196b82c2b038531a8fbcd3a1dd41d8cf/4ec73/safari-themecolor-black.jpg 180w,\n/static/196b82c2b038531a8fbcd3a1dd41d8cf/158ba/safari-themecolor-black.jpg 360w,\n/static/196b82c2b038531a8fbcd3a1dd41d8cf/b9a87/safari-themecolor-black.jpg 666w\" sizes=\"(max-width: 666px) 100vw, 666px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 666px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQBAgMF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAQAC/9oADAMBAAIQAxAAAAHuTS8QLBqkpssyaAYUaxbckr//xAAeEAACAgICAwAAAAAAAAAAAAABAgADBBESIRATQf/aAAgBAQABBQITfj71LLGRvdUCMmswcLQca1nFJ2i6Br2Eq4vG6CElp//EABYRAAMAAAAAAAAAAAAAAAAAAAARIP/aAAgBAwEBPwEU/wD/xAAWEQADAAAAAAAAAAAAAAAAAAAAESD/2gAIAQIBAT8BHP8A/8QAHhAAAQMEAwAAAAAAAAAAAAAAEQABMQIQEjIgIZH/2gAIAQEABj8Ct1cU0lQ/ih4MLLFPqCmdxAtsjk/H/8QAHRAAAgMBAAMBAAAAAAAAAAAAAREAITFBEFGBkf/aAAgBAQABPyFgyV8hBFxmAT6KWFqLBAhtzSFZhhStOJeG5YhgJ1aX2JSQG00wG3KNv24Uj7HSVAV2WSNiQTXj/9oADAMBAAIAAwAAABDUzQ5XD//EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQMBAT8QE7Iplz//xAAYEQACAwAAAAAAAAAAAAAAAAABEAARIf/aAAgBAgEBPxCERip//8QAHxABAQACAgMAAwAAAAAAAAAAAREAMSFBUWGRcdHw/9oACAEBAAE/EEiUr5fvNgAd6wHSnd6fuHlpsLD5g8Cb1bhGrhA5r79YoKAQiQRe9FRwbUmlV2YBAng88/nHlUqkjTr3k68M5RG8ceTe8oFhJDf5yxJFRqK3z7yy5CTHjq5MjUcTw8FHIpMLIbyHjP/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"사파리 상단바가 까맣지 않은 모습\" title=\"사파리 상단바가 까맣지 않은 모습\" src=\"/static/c44acc234aa4acd3e5257f76a0fc5c7b/b9a87/safari-themecolor-none.jpg\" srcset=\"/static/c44acc234aa4acd3e5257f76a0fc5c7b/4ec73/safari-themecolor-none.jpg 180w,\n/static/c44acc234aa4acd3e5257f76a0fc5c7b/158ba/safari-themecolor-none.jpg 360w,\n/static/c44acc234aa4acd3e5257f76a0fc5c7b/b9a87/safari-themecolor-none.jpg 666w\" sizes=\"(max-width: 666px) 100vw, 666px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</p>\n<p>그래서 무엇이 문제인지 알아봤다.</p>\n<p>굉장히 삽질을 많이 했지만 결론만 말하자면, 이런 현상이 발생한 이유는 <code class=\"language-text\">index.html</code> 파일에 다음과 같은 코드가 포함되어 있기 때문이었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 생략 --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token comment\">&lt;!-- 생략 --></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">&lt;meta name=\"theme-color\" content=\"#000000\" /></code>를 제거하고 나면 내 웹사이트에 접속할 때 다른 웹사이트처럼 상단바의 색이 자연스럽게 표시된다.<br>\n라이트모드, 다크모드 둘 다 페이지의 배경색에 맞춰 색이 적용됐다.</p>\n<p style=\"display:flex\">\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 666px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAECAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAfcyggSqUCRpOgH/xAAbEAADAQADAQAAAAAAAAAAAAAAARECECAyQf/aAAgBAQABBQL6ZjRRJIhO1415xptn/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAGRAAAgMBAAAAAAAAAAAAAAAAECEBETAx/9oACAEBAAY/AuBFRWv/xAAcEAACAQUBAAAAAAAAAAAAAAABEQAQIVFhcSD/2gAIAQEAAT8hD0ZdCYN3y49TgwQkMRIkFvD1ODQiCIiCTan/2gAMAwEAAgADAAAAEIDzDMAP/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEDAQE/EBT/AP/EABgRAAIDAAAAAAAAAAAAAAAAAAARASAh/9oACAECAQE/ECU8r//EAB8QAQADAAEEAwAAAAAAAAAAAAEAESFxIEFRYTGh8P/aAAgBAQABPxDXi3t+qiWJuxwAWtMHmXF3zLQZiZVBW+ZYq9/c5YAUdDTueJ+VQbjqUhjNuqLVHzKPE//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"라이트모드의 웹사이트 모습\" title=\"라이트모드의 웹사이트 모습\" src=\"/static/e05e94e63a6649b663291bd04d95f312/b9a87/mypage-lightmode.jpg\" srcset=\"/static/e05e94e63a6649b663291bd04d95f312/4ec73/mypage-lightmode.jpg 180w,\n/static/e05e94e63a6649b663291bd04d95f312/158ba/mypage-lightmode.jpg 360w,\n/static/e05e94e63a6649b663291bd04d95f312/b9a87/mypage-lightmode.jpg 666w\" sizes=\"(max-width: 666px) 100vw, 666px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n  <span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 666px; \">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 216.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAEDAgQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAH5HNakCdXMtQaVrHnUf//EABwQAAICAgMAAAAAAAAAAAAAAAABESECEhAgMf/aAAgBAQABBQKKhj5ZRQ+mpoQY+5JJH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8BX//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EABoQAAEFAQAAAAAAAAAAAAAAADEAARAgMuH/2gAIAQEABj8C5JRgo10y01f/xAAeEAADAAIBBQAAAAAAAAAAAAAAAREhMRAgYbHB8P/aAAgBAQABPyHJdjsMu58QrhrLNvLosF6HxDbDvQlCAcvdEqplylx//9oADAMBAAIAAwAAABDzODC/7//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QX//EABkRAAIDAQAAAAAAAAAAAAAAAAARARAhMf/aAAgBAgEBPxAnuWxn/8QAIBABAAICAQQDAAAAAAAAAAAAAQARITFBEFFhkSBx8P/aAAgBAQABPxBuC7wae4Ejq8QghpDF6ICAQdr1PK9y4O62txZTGsnCX34q6it1XwQaPufjZig4bIByxczGU2F29P/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"다크모드의 웹사이트 모습\" title=\"다크모드의 웹사이트 모습\" src=\"/static/05013bfd2db94b072c623c4fab1e6a10/b9a87/mypage-darkmode.jpg\" srcset=\"/static/05013bfd2db94b072c623c4fab1e6a10/4ec73/mypage-darkmode.jpg 180w,\n/static/05013bfd2db94b072c623c4fab1e6a10/158ba/mypage-darkmode.jpg 360w,\n/static/05013bfd2db94b072c623c4fab1e6a10/b9a87/mypage-darkmode.jpg 666w\" sizes=\"(max-width: 666px) 100vw, 666px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n</p>\n<p>지금부터 이렇게 된 이유에 대해 알아보자.</p>\n<h2 id=\"사파리의-웹-사이트-색조로-물들이기-기능\" style=\"position:relative;\"><a href=\"#%EC%82%AC%ED%8C%8C%EB%A6%AC%EC%9D%98-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%83%89%EC%A1%B0%EB%A1%9C-%EB%AC%BC%EB%93%A4%EC%9D%B4%EA%B8%B0-%EA%B8%B0%EB%8A%A5\" aria-label=\"사파리의 웹 사이트 색조로 물들이기 기능 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사파리의 웹 사이트 색조로 물들이기 기능</h2>\n<p>아이폰의 사파리에는 <code class=\"language-text\">웹 사이트 색조로 물들이기</code> 기능이 있다. 웹 사이트 틸팅 기능이라고도 한다.<br>\n이 기능은 사파리에 접속했을 때 웹 사이트의 전체적인 색조를 파악한 후 상단바 등 기타 UI에 그 색조를 적용해 자연스럽게 보이도록 도와주는 기능이다.</p>\n<p>아이폰 설정에서 사파리 탭에 들어가 기능을 끄거나 켤 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 666px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 216.1111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB7g2iGLLmjMYlVgl2EJ//xAAbEAACAwADAAAAAAAAAAAAAAABAgAQMSAyQf/aAAgBAQABBQKzDfmXvBjFYxev/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEDAQE/AZR//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAFxABAQEBAAAAAAAAAAAAAAAAARAgAP/aAAgBAQAGPwKmTbDv/8QAHRAAAwACAgMAAAAAAAAAAAAAAAERIUExUWGRof/aAAgBAQABPyFdmdnBfDsTjAyVkkDUJ4NmrRrBo2aonUmOWE9DFTeI9HxH/9oADAMBAAIAAwAAABDMJj9DH//EABkRAAIDAQAAAAAAAAAAAAAAAAABEBEhMf/aAAgBAwEBPxCVzBmlZ//EABcRAAMBAAAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8Qqiw//8QAHxABAAMAAgIDAQAAAAAAAAAAAQARITFBUeFhcbHx/9oACAEBAAE/EBSobWcE74VkKzTu63MKLwOXEVAae+pzm/jO69waYV8HuJe8AyNi1Pr+Qu1iRCrEyKnFafHuNOLxxKMKsumXrQraPiJkaqpNr8fyf//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"아이폰 설정 화면\"\n        title=\"아이폰 설정 화면\"\n        src=\"/static/df4763ac523e7e00f9bc7c42f73f5d93/b9a87/iphone-safari-setting.jpg\"\n        srcset=\"/static/df4763ac523e7e00f9bc7c42f73f5d93/4ec73/iphone-safari-setting.jpg 180w,\n/static/df4763ac523e7e00f9bc7c42f73f5d93/158ba/iphone-safari-setting.jpg 360w,\n/static/df4763ac523e7e00f9bc7c42f73f5d93/b9a87/iphone-safari-setting.jpg 666w\"\n        sizes=\"(max-width: 666px) 100vw, 666px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>자세한 동작 원리는 모르겠지만 상단바를 어떤 색조로 물들일지는 다음에 의해 정해지는 것 같다.</p>\n<ol>\n<li>html 파일에 테마 컬러가 정해져 있을 경우 해당 테마 컬러의 색조로 물들임</li>\n<li>테마 컬러가 정해져 있지 않다면 사파리에서 적합한 색조를 찾아 해당 색조로 물들임\n이 경우, 주로 페이지의 background color가 색조로 정해지는 듯 함</li>\n</ol>\n<p>따라서 이 기능이 꺼져 있다면 어떤 웹사이트를 방문하든 상단바의 색상은 라이트 모드일 땐 하얀색, 다크 모드일땐 짙은 회색으로 표시된다.<br>\n이 기능이 켜져 있을 때만 사파리에서 테마 컬러를 판단해 상단바(를 포함한 다른 웹사이트 외의 UI) 색상을 바꿔주는 것이다.<br>\n차라리 <code class=\"language-text\">meta</code> 태그로 <code class=\"language-text\">theme-color</code>를 정해주지 않았다면 알아서 적당한 색조로 물들여주는데 <code class=\"language-text\">theme-color</code>를 검정색으로 정해놔서 부자연스러운 색으로 물들여진 것이다.</p>\n<h2 id=\"cra의-indexhtml-파일\" style=\"position:relative;\"><a href=\"#cra%EC%9D%98-indexhtml-%ED%8C%8C%EC%9D%BC\" aria-label=\"cra의 indexhtml 파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CRA의 index.html 파일</h2>\n<p>그럼 왜 <code class=\"language-text\">theme-color</code>가 검정색으로 설정되어 있을까? 난 그런 적이 없다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#000000<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>CRA로 리액트 웹 프로젝트를 구성하면 자동으로 <code class=\"language-text\">public</code> 폴더에 <code class=\"language-text\">index.html</code> 파일을 만들어준다.<br>\n이때 이 배포에 근간이 되는 <code class=\"language-text\">index.html</code> 파일에 해당 메타 태그가 자동으로 설정되어 있다.<br>\n그래서 CRA로 만들고 <code class=\"language-text\">index.html</code> 파일에 손대지 않은 프로젝트는 죄다 상단바가 검정색으로 뜬다.</p>\n<p>개인적으로 CRA에서 흰색도 아닌 검정색으로 메인테마를 정해주는 이유를 정말 모르겠다.<br>\n차라리 안 정해놓았다면 오히려 자연스럽게 보였을 텐데 이 메타 태그 한줄때문에 하루종일 삽질했다.<br>\n아무래도 대충 살지 말라는 뜻인가 보다.</p>\n<h2 id=\"사이트의-테마-컬러를-정하고-싶다면\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%9D%98-%ED%85%8C%EB%A7%88-%EC%BB%AC%EB%9F%AC%EB%A5%BC-%EC%A0%95%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4%EB%A9%B4\" aria-label=\"사이트의 테마 컬러를 정하고 싶다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>사이트의 테마 컬러를 정하고 싶다면?</h2>\n<p>나는 테마 컬러를 지정하기 보단 페이지마다 적당한 색조로 알아서 물들이게 하고 싶었기 때문에 CRA가 써준 메타 태그를 지웠다.<br>\n만약 사파리가 알아서 색조를 정해 물들여주는 게 아니라 내가 직접 테마 컬러를 지정하고 싶다면 메타 태그를 이용하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token comment\">&lt;!-- Dark mode theme --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">media</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>(prefers-color-scheme: dark)<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#0e4359<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n\n<span class=\"token comment\">&lt;!-- Light mode theme or no preference --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-color<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#a62339<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>이렇게 하면 다크모드일 때와, 그렇지 않을 때의 테마 컬러 둘 다 정할 수 있다.</p>\n<p>어디까지나 모바일 사파리의 <code class=\"language-text\">웹 사이트 색조로 물들이기</code> 기능을 켰을 때 적용되는 상황이라는 걸 잊지 말자.</p>\n<hr>\n<p>참고</p>\n<ul>\n<li><a href=\"https://stuffandnonsense.co.uk/blog/time-to-update-your-theme-color-meta-tag-for-safari\">TIME TO UPDATE YOUR THEME-COLOR META TAG FOR SAFARI</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EC%82%AC%ED%8C%8C%EB%A6%AC%EC%9D%98-%EC%9B%B9-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EC%83%89%EC%A1%B0%EB%A1%9C-%EB%AC%BC%EB%93%A4%EC%9D%B4%EA%B8%B0-%EA%B8%B0%EB%8A%A5\">사파리의 웹 사이트 색조로 물들이기 기능</a></li>\n<li><a href=\"#cra%EC%9D%98-indexhtml-%ED%8C%8C%EC%9D%BC\">CRA의 index.html 파일</a></li>\n<li><a href=\"#%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%9D%98-%ED%85%8C%EB%A7%88-%EC%BB%AC%EB%9F%AC%EB%A5%BC-%EC%A0%95%ED%95%98%EA%B3%A0-%EC%8B%B6%EB%8B%A4%EB%A9%B4\">사이트의 테마 컬러를 정하고 싶다면?</a></li>\n</ul>\n</div>","excerpt":"리액트 웹사이트를 만든 후 디바이스별로 스타일이 잘 적용되었는지 확인하던 중 이상한 현상을 발견했다. 아이폰에서 사파리로 내가 만든 웹사이트를 접속하면 다른 여타 사이트들과 달리 상단바가 까맣게 표시되어서 매우 거슬렸다. 그래서 무엇이 문제인지 알아봤다. 굉장히 삽질을 많이 했지만 결론만 말하자면, 이런 현상이 발생한 이유는  파일에 다음과 같은 코드가 포함되어 있기 때문이었다. 를 제거하고 나면 내 웹사이트에 접속할 때 다른 웹사이트처럼 상단바의 색이 자연스럽게 표시된다. 라이트모드, 다크모드 둘 다 페이지의 배경색에 맞춰 색이 적용됐다. 지금부터 이렇게 된 이유에 대해 알아보자. 사파리의 웹 사이트 색조로 물들이기 기능 아이폰의 사파리에는  기능이 있다. 웹 사이트 틸팅 기능이라고도 한다. 이 기능은 사파리에 접속했을 때 웹 사이트의 전체적인 색조를 파악한 후 상단바 등 기타 UI에 그 색조를 적용해 자연스럽게 보이도록 도와주는 기능이다. 아이폰 설정에서 사파리 탭에 들어가 기…","frontmatter":{"date":"June 25, 2023","title":"리액트 웹을 모바일 사파리에서 열었을 때 상단바가 검정색인 현상 해결하기","categories":"html"},"fields":{"slug":"/meta-theme-color/"}},"next":{"id":"2a24772e-f40a-5730-a4b3-b2bbdeba2949","html":"<p>프론트엔드 개발을 위해 백엔드 REST API 서버를 만들었는데 다음과 같은 에러가 발생했다.</p>\n<blockquote>\n<p>❌ <strong>Mixed Content</strong>: The page at ’<a href=\"https://ordinary-todolist.netlify.app/login\">https://ordinary-todolist.netlify.app/login</a>’ was loaded over HTTPS, but requested an insecure XMLHttpRequest endpoint ’<a href=\"http://43.201.130.34:8000/auth/signin\">http://43.201.130.34:8000/auth/signin</a>’. This request has been blocked; the content must be served over HTTPS.</p>\n</blockquote>\n<p>내용을 해석해보니 요청을 HTTPS로 보내라는 것이다.<br>\n하지만 내 REST API 서버는 HTTPS 통신 설정도 안한 작고 소중한 아이였다..<br>\n어쩔수 없지. 까짓거 한다.</p>\n<h2 id=\"도메인-구매\" style=\"position:relative;\"><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EA%B5%AC%EB%A7%A4\" aria-label=\"도메인 구매 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>도메인 구매</h2>\n<p>HTTPS 통신을 설정하기 위해서는 SSL 인증서가 필요하고, SSL 인증을 받기 위해서는 도메인이 필요하다.<br>\n도메인을 구매할 수 있는 경로는 다양하다.<br>\n나는 가비아를 통해서 구매했고 레코드 설정도 해줬다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABJ0AAASdAHeZh94AAABHUlEQVQoz5WQy04DMQxF54tgARv28JcFxAY+h21boQohpL5m+sh0OrHj5KCktFTdEcnKPfa1E7l6eFtw/7rg7mXO1WDK9ePsLzIPzvlC/3Luu32ecfM0o5qslclKGTfCqFFGtTBceoZLYXzkWsp91Jc8qrV437/WVEF6tvueFA2THmIAEhDxXQuW2cCUFITg96jfF23qIVnJZb90jkpU6dXwqogGNBirzbZE74VgEYuxaC9a6hoCbdedctm798LWtVRmVn4kIsQYSSmxrBtm88WJc+R6CKHonN/tdiWXP7TZOnrvaduW6nsjfCx7mi5ANqdEfiQ3nw/M+sjZE80wi0yd8LnyTN1hcCWW6DUSYt7bYXv/OWqJPCNEcM7xA6t/CWcUcEL0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"가비아 DNS 레코드 수정 화면\"\n        title=\"가비아 DNS 레코드 수정 화면\"\n        src=\"/static/476eff56ca606d53de0a268518679e46/37523/gabia-dns-record.png\"\n        srcset=\"/static/476eff56ca606d53de0a268518679e46/e9ff0/gabia-dns-record.png 180w,\n/static/476eff56ca606d53de0a268518679e46/f21e7/gabia-dns-record.png 360w,\n/static/476eff56ca606d53de0a268518679e46/37523/gabia-dns-record.png 720w,\n/static/476eff56ca606d53de0a268518679e46/302a4/gabia-dns-record.png 1080w,\n/static/476eff56ca606d53de0a268518679e46/b94e3/gabia-dns-record.png 1126w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>도메인을 구매한 후 등록할 때 시간이 조금 걸리므로 여유를 가지고 확인하는 게 좋다.</p>\n<h2 id=\"ssl-인증\" style=\"position:relative;\"><a href=\"#ssl-%EC%9D%B8%EC%A6%9D\" aria-label=\"ssl 인증 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSL 인증</h2>\n<p>SSL 인증서를 발급해주는 곳은 다양한데 무료로 유명한 곳인 Let’s Encrypt를 이용했다.<br>\nLet’s Encrypt는 인증서를 발급해주는 곳이고 내 서버에서 이 인증서를 발급받기 위해서 certbot이라는 패키지를 이용했다.<br>\n발급받기 위한 다른 방법들도 있지만 certbot이 가장 대중적인 방법인 듯 하다. Let’s Encrypt 공식 홈페이지에서도 certbot을 사용하길 권장하고 있다.</p>\n<p>먼저, certbot을 설치한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> certbot</code></pre></div>\n<p>그리고 인증서를 발급받기 전에 nginx를 설치해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx</code></pre></div>\n<p>드디어 인증서 발급</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot certonly <span class=\"token parameter variable\">--nginx</span></code></pre></div>\n<p>위 명령어를 치면 이메일을 입력하라거나 동의하라거나 도메인 주소를 입력하라거나 여러가지를 시키는데 알아서 잘 입력해주면 된다.<br>\n그러면 인증서는 <code class=\"language-text\">/etc/letsencrypt/live/도메인주소/fullchain.pem</code>에, 키는 <code class=\"language-text\">/etc/letsencrypt/live/도메인주소/privkey.pem</code>에 저장된다.</p>\n<p>이제 이 인증서와 키를 nginx에게 알려줘야 한다.</p>\n<h2 id=\"nginx-설정\" style=\"position:relative;\"><a href=\"#nginx-%EC%84%A4%EC%A0%95\" aria-label=\"nginx 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NginX 설정</h2>\n<p>아래 명령어를 통해 nginx 설정 파일을 편집한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-available/default</code></pre></div>\n<p>설정 파일을 편집하기에 앞서 나의 목표는 다음과 같다.<br>\n클라이언트에서 해당 인스턴스로 HTTPS로 요청하면 nginx의 reverse proxy 기능을 이용해 8000번 포트에서 돌아가고 있는 API 서버로 요청을 보내주는 것이다.</p>\n<p>아래와 같이 써줬다.<br>\n편집하고 나서 <code class=\"language-text\">:q!</code>는 저장안하고 강제로 나가기, <code class=\"language-text\">:wq</code>는 저장 후 나가기. 잊지 말자.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">server <span class=\"token punctuation\">{</span>\n\t\tlisten <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\n\t\tserver_name default_server<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> https://<span class=\"token variable\">$host</span><span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nserver <span class=\"token punctuation\">{</span>\n\t\tlisten <span class=\"token number\">443</span> ssl<span class=\"token punctuation\">;</span>\n\t\tserver_name default_server<span class=\"token punctuation\">;</span>\n\n\t\tssl_certificate /etc/letsencrypt/live/도메인주소/fullchain.pem<span class=\"token punctuation\">;</span>\n\t\tssl_certificate_key /etc/letsencrypt/live/도메인주소/privkey.pem<span class=\"token punctuation\">;</span>\n\n\t\tlocation / <span class=\"token punctuation\">{</span>\n\t\t\t\tproxy_pass http://localhost:8000<span class=\"token punctuation\">;</span>\n\t\t\t\tproxy_http_version <span class=\"token number\">1.1</span><span class=\"token punctuation\">;</span>\n\t\t\t\tproxy_set_header Host <span class=\"token variable\">$host</span><span class=\"token punctuation\">;</span>\n\t\t\t\tproxy_set_header X-Real-IP <span class=\"token variable\">$remote_addr</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>HTTP 통신으로 요청오면 자동으로 HTTPS 통신으로 넘어가도록 했다. (그냥. 어차피 HTTPS로 해야 에러 안나니까)<br>\nHTTPS 통신으로 요청이 오면 SSL 인증할 수 있도록 인증서랑 키의 위치를 입력해주고 8000번 포트로 연결해줬다.<br>\n<code class=\"language-text\">proxy_pass</code> 아래는 그냥 프록시 관련 설정들이다.</p>\n<p>nginx 설정을 해줬으면 nginx를 시작해주거나, 이미 켜져있다면 재시작해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx restart</code></pre></div>\n<p>재시작 명령어만 써놓은 이유는 시작했는지 고민할 시간에 수시로 재시작하는 게 더 편해서 ㅎㅎ</p>\n<p>시작하기 전에 nginx 테스트를 해봐도 좋다.<br>\n설정 파일에 문제가 없는지 테스트해준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> nginx <span class=\"token parameter variable\">-t</span></code></pre></div>\n<p>nginx를 시작하고 나서 제대로 돌아가는지 확인할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl status nginx</code></pre></div>\n<p>구매했던 도메인 주소로 잘 들어가지면 성공!</p>\n<p>사실 nginx 설정은 이전에도 몇 번 해봤었는데 어떤 용도로 사용하느냐에 따라 설정을 달리 해주다 보니 할때마다 헤맨다..<br>\n그래도 점점 알아가는 것 같아서 좋다.</p>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%8F%84%EB%A9%94%EC%9D%B8-%EA%B5%AC%EB%A7%A4\">도메인 구매</a></li>\n<li><a href=\"#ssl-%EC%9D%B8%EC%A6%9D\">SSL 인증</a></li>\n<li><a href=\"#nginx-%EC%84%A4%EC%A0%95\">NginX 설정</a></li>\n</ul>\n</div>","frontmatter":{"date":"May 24, 2023","title":"REST API 서버에 HTTPS 통신 설정하기","categories":"web"},"fields":{"slug":"/rest-api-https/"}},"prev":{"id":"2facdfc2-dacb-5945-8dec-721ea4e07a94","html":"<p><a href=\"https://velog.io/@lky5697/5-best-practices-for-preventing-chaos-in-tailwind-css\">[번역] Tailwind CSS에서 혼란을 방지하기 위한 5가지 모범 사례</a>를 읽으면서 Tailwind CSS를 사용할 때 <code class=\"language-text\">@apply</code> 지시문을 남용하는 게 좋지 않다는 것을 알게 되었다.<br>\nTailwind CSS를 사용하던 프로젝트의 <code class=\"language-text\">@apply</code> 지시문을 줄이면서 느낀 것을 적어보려 한다.</p>\n<h2 id=\"bad-practice\" style=\"position:relative;\"><a href=\"#bad-practice\" aria-label=\"bad practice permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Bad Practice</h2>\n<p>Tailwind CSS로 클래스 이름을 작성하다 보면 너무 길어져 지저분해 보일 때가 있다.<br>\n이때 <code class=\"language-text\">@layer</code>와 <code class=\"language-text\">@apply</code>를 사용하면 CSS 파일에 클래스를 새로 만들어 길고 지저분하게 늘어진 클래스 이름을 간결하게 만들 수 있다.</p>\n<p>이렇게 너무 길어 뭐가 뭔지 모르겠는 클래스 이름을,</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span>\n  <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span>\n  <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>w-full px-5 py-2.5 rounded-lg font-medium text-sm text-center focus:outline-none focus:ring-2 bg-primary-600 hover:bg-primary-700 disabled:bg-primary-600/50 text-white focus:ring-primary-300 dark:disabled:text-gray-400 dark:focus:ring-primary-800<span class=\"token punctuation\">\"</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><code class=\"language-text\">@layer</code>와 <code class=\"language-text\">@apply</code>를 사용해 버튼의 모양과 버튼의 색에 대한 클래스로 나눠 정의 해주면,</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token atrule\"><span class=\"token rule\">@tailwind</span> base<span class=\"token punctuation\">;</span></span>\n<span class=\"token atrule\"><span class=\"token rule\">@tailwind</span> components<span class=\"token punctuation\">;</span></span>\n<span class=\"token atrule\"><span class=\"token rule\">@tailwind</span> utilities<span class=\"token punctuation\">;</span></span>\n\n<span class=\"token atrule\"><span class=\"token rule\">@layer</span> components</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.button-rounded-lg</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> w-full px-5 py-2.5 rounded-lg<span class=\"token punctuation\">;</span></span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> font-medium text-sm text-center<span class=\"token punctuation\">;</span></span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token selector\">.button-primary</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> <span class=\"token property\">focus</span><span class=\"token punctuation\">:</span>outline-none <span class=\"token property\">focus</span><span class=\"token punctuation\">:</span>ring-2<span class=\"token punctuation\">;</span></span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> bg-primary-600 <span class=\"token property\">hover</span><span class=\"token punctuation\">:</span>bg-primary-700 <span class=\"token property\">disabled</span><span class=\"token punctuation\">:</span>bg-primary-600/50<span class=\"token punctuation\">;</span></span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> text-white <span class=\"token property\">focus</span><span class=\"token punctuation\">:</span>ring-primary-300<span class=\"token punctuation\">;</span></span>\n    <span class=\"token atrule\"><span class=\"token rule\">@apply</span> <span class=\"token property\">dark</span><span class=\"token punctuation\">:</span><span class=\"token property\">disabled</span><span class=\"token punctuation\">:</span>text-gray-400 <span class=\"token property\">dark</span><span class=\"token punctuation\">:</span><span class=\"token property\">focus</span><span class=\"token punctuation\">:</span>ring-primary-800<span class=\"token punctuation\">;</span></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 알아보기도 쉽고 간결하게 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">disabled</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>disabled<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>button-rounded-lg button-primary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  </span><span class=\"token punctuation\">{</span>text<span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>와! 가독성도 좋고 만들어 둔 클래스를 재사용할 수 있으니 너무 좋다!<br>\n이렇게 하면 Tailwind CSS의 스타일을 알아보기 힘든 단점도 보완돼!<br>\n라고 생각했지만, 이 방법은 좋은 방법이 아니었다.</p>\n<h2 id=\"추상화를-위해-apply-지시문을-남용하지-말기\" style=\"position:relative;\"><a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%B4-apply-%EC%A7%80%EC%8B%9C%EB%AC%B8%EC%9D%84-%EB%82%A8%EC%9A%A9%ED%95%98%EC%A7%80-%EB%A7%90%EA%B8%B0\" aria-label=\"추상화를 위해 apply 지시문을 남용하지 말기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>추상화를 위해 @apply 지시문을 남용하지 말기</h2>\n<p><code class=\"language-text\">@apply</code>를 코드를 깔끔하게 만들기 위해 사용하면 안된다.</p>\n<p>Tailwind CSS의 가장 큰 장점은 CSS 파일을 만들 필요 없이 HTML 안에서 클래스 이름을 통해 쉽게 스타일을 적용하는 것이다.<br>\n그런데 따로 CSS 파일을 만들어 클래스를 만들고 관리하는 것은 이런 Tailwind CSS의 장점을 퇴색시킨다.<br>\n스타일을 적용할 수 있는 방법이 두 가지가 되어 혼란을 야기하기 때문에 Tailwind CSS 없이 CSS 파일로만 스타일을 적용하는 것보다 유지보수가 더 힘들어진다.</p>\n<p>Tailwind CSS를 사용하면서 CSS 파일에 별도의 클래스를 만들기 시작하면, 스타일 변경이 있을 때 컴포넌트 파일과 CSS 파일을 돌아다니며 확인해야 한다.<br>\nCSS 파일이 방대해질수록 어떤 스타일이 관여되었는지 확인하기 어려워진다.<br>\n한눈에 스타일이 파악되지 않고 특히 <code class=\"language-text\">@layer</code>의 base, components, utilities는 각각 우선순위가 다르기 때문에 혼란을 가중한다.</p>\n<p>따라서 버튼처럼 매우 작고 다양한 곳에서 사용되는 스타일이 아니라면 <code class=\"language-text\">@apply</code>를 통해 별도의 클래스를 만드는 것은 추천되지 않는다.<br>\n또 리액트처럼 컴포넌트 중심의 프로젝트는 글로벌한 CSS 클래스를 만드는 것보다 컴포넌트에 스타일을 적용하고 컴포넌트를 재사용하는 것이 훨씬 좋은 선택이다.</p>\n<p>해당 내용은 <a href=\"https://tailwindcss.com/docs/reusing-styles#avoiding-premature-abstraction\">Tailwind CSS 공식 문서</a>에서도 확인할 수 있다.</p>\n<h2 id=\"apply-지시문-최소화하기\" style=\"position:relative;\"><a href=\"#apply-%EC%A7%80%EC%8B%9C%EB%AC%B8-%EC%B5%9C%EC%86%8C%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"apply 지시문 최소화하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>@apply 지시문 최소화하기</h2>\n<p>Tailwind CSS를 사용한 프로젝트를 보니 <code class=\"language-text\">@apply</code>가 참 많아 다음과 같이 최소화했다.</p>\n<h3 id=\"1-indexcss에-정의된-components와-utilities를-전부-제거\" style=\"position:relative;\"><a href=\"#1-indexcss%EC%97%90-%EC%A0%95%EC%9D%98%EB%90%9C-components%EC%99%80-utilities%EB%A5%BC-%EC%A0%84%EB%B6%80-%EC%A0%9C%EA%B1%B0\" aria-label=\"1 indexcss에 정의된 components와 utilities를 전부 제거 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. index.css에 정의된 components와 utilities를 전부 제거</h3>\n<p><code class=\"language-text\">index.css</code>에 <code class=\"language-text\">@apply</code>로 정의한 클래스 대부분이 코드 가독성을 높이기 위해 한두 번 사용되는 스타일이었다.\n이런 한두 번 사용되는 클래스들은 과감하게 제거하고 다시 원래 컴포넌트 스타일에 입력해줬다.</p>\n<h3 id=\"2-자주-사용된-icon-button-클래스는-iconbutton-컴포넌트로-대체\" style=\"position:relative;\"><a href=\"#2-%EC%9E%90%EC%A3%BC-%EC%82%AC%EC%9A%A9%EB%90%9C-icon-button-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%8A%94-iconbutton-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%A1%9C-%EB%8C%80%EC%B2%B4\" aria-label=\"2 자주 사용된 icon button 클래스는 iconbutton 컴포넌트로 대체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 자주 사용된 icon-button 클래스는 IconButton 컴포넌트로 대체</h3>\n<p><code class=\"language-text\">icon-button</code> 클래스는 네 번 사용될 정도로 재사용성이 높아 <code class=\"language-text\">IconButton</code> 컴포넌트를 만들어 대체했다.</p>\n<p>더 자세한 내용은 <a href=\"https://github.com/heony704/ordinary-todolist/pull/7\">해당 Pull Request</a>에서 확인할 수 있다.</p>\n<p>이렇게 수정하다 보니 이 전엔 나름 가독성 높이겠다고 했던 행동이 헛수고가 되었다.<br>\n사용하는 프레임워크의 개념에 대해 정확히 파악하고 잊지 않는 것이 중요한 것 같다.</p>\n<hr>\n<p>참고</p>\n<ul>\n<li><a href=\"https://velog.io/@lky5697/5-best-practices-for-preventing-chaos-in-tailwind-css\">[번역] Tailwind CSS에서 혼란을 방지하기 위한 5가지 모범 사례</a></li>\n<li><a href=\"https://evilmartians.com/chronicles/5-best-practices-for-preventing-chaos-in-tailwind-css\">5 best practices for preventing chaos in Tailwind CSS</a></li>\n<li><a href=\"https://tailwindcss.com/docs/reusing-styles#avoiding-premature-abstraction\">Tailwind CSS - Avoiding premature abstraction</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#bad-practice\">Bad Practice</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%B6%94%EC%83%81%ED%99%94%EB%A5%BC-%EC%9C%84%ED%95%B4-apply-%EC%A7%80%EC%8B%9C%EB%AC%B8%EC%9D%84-%EB%82%A8%EC%9A%A9%ED%95%98%EC%A7%80-%EB%A7%90%EA%B8%B0\">추상화를 위해 @apply 지시문을 남용하지 말기</a></p>\n</li>\n<li>\n<p><a href=\"#apply-%EC%A7%80%EC%8B%9C%EB%AC%B8-%EC%B5%9C%EC%86%8C%ED%99%94%ED%95%98%EA%B8%B0\">@apply 지시문 최소화하기</a></p>\n<ul>\n<li><a href=\"#1-indexcss%EC%97%90-%EC%A0%95%EC%9D%98%EB%90%9C-components%EC%99%80-utilities%EB%A5%BC-%EC%A0%84%EB%B6%80-%EC%A0%9C%EA%B1%B0\">1. index.css에 정의된 components와 utilities를 전부 제거</a></li>\n<li><a href=\"#2-%EC%9E%90%EC%A3%BC-%EC%82%AC%EC%9A%A9%EB%90%9C-icon-button-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%8A%94-iconbutton-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8%EB%A1%9C-%EB%8C%80%EC%B2%B4\">2. 자주 사용된 icon-button 클래스는 IconButton 컴포넌트로 대체</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 28, 2023","title":"Tailwind CSS @apply 지시문 최소화하기","categories":"react"},"fields":{"slug":"/minimize-tailwindcss-apply/"}},"site":{"siteMetadata":{"siteUrl":"https://heony704.github.io","comments":{"utterances":{"repo":"heony704/heony704.github.io"}}}}},"pageContext":{"slug":"/meta-theme-color/","nextSlug":"/rest-api-https/","prevSlug":"/minimize-tailwindcss-apply/"}},"staticQueryHashes":["161131432","1956554647","2938748437"]}